{"version":3,"sources":["assets/script/button_events.js"],"names":["userdata","require","cc","Class","Component","properties","my_flights_window","type","Node","warehouse_window","activeflights","flights","warning_window","onLoad","start","update","dt","showallflights","active","getChildByName","showflying","closeallflights","showwarehouse","closewarehouse","fly","event","customEventData","go","lefts","leftfuel","fuel","leftpassenger","passenger","o","airplanedata","level","isflying","destination","name","reward","endtime","Date","parse","time","inner","showwarning","hidewarning","toactive","toflightlist","getComponent","Label","string"],"mappings":"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","sourceRoot":"/","sourcesContent":["// Learn cc.Class:\n//  - https://docs.cocos.com/creator/manual/en/scripting/class.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\n\nvar userdata = require('userdata');\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        my_flights_window:{\n            type:cc.Node,\n            default:null\n        },\n        warehouse_window:{\n            type:cc.Node,\n            default:null\n        },\n        activeflights:{\n            type:cc.Node,\n            default:null\n        },\n        flights:{\n            type:cc.Node,\n            default:null\n        },\n        warning_window:{\n            type:cc.Node,\n            default:null\n        }\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        \n    },\n\n    start () {\n\n    },\n\n    update (dt) {\n        \n    },\n    showallflights(){\n        this.my_flights_window.active = true;\n        this.my_flights_window.getChildByName(\"active\").active = false;\n        this.my_flights_window.getChildByName(\"inner\").active = true;\n    },\n    showflying(){\n        this.my_flights_window.active = true;\n        this.my_flights_window.getChildByName(\"inner\").active = false;\n        this.my_flights_window.getChildByName(\"active\").active = true;\n    },\n    closeallflights(){\n        this.my_flights_window.active = false;\n    },\n    showwarehouse(){\n        this.warehouse_window.active = true;\n    },\n\n    closewarehouse(){\n        this.warehouse_window.active = false;\n    },\n    fly:function(event,customEventData){\n        this.my_flights_window.active = false;\n        var go = 0;\n        if(userdata.lefts.leftfuel>=customEventData.fuel&&userdata.lefts.leftpassenger>=customEventData.passenger){\n            for(var o in userdata.airplanedata){\n                if(userdata.airplanedata[o].level==customEventData.level && userdata.airplanedata[o].isflying==\"false\"){\n                    userdata.airplanedata[o].isflying = \"true\";\n                    userdata.airplanedata[o].destination = customEventData.name;\n                    userdata.airplanedata[o].reward = customEventData.reward;\n                    userdata.airplanedata[o].endtime = Date.parse(new Date())/1000 + customEventData.time;\n                    userdata.lefts.leftfuel -= customEventData.fuel;\n                    userdata.lefts.leftpassenger -= customEventData.passenger;\n                    go = 1;\n                    break;\n                }\n            }\n        }else{\n            let inner = 'Do not have enough fuel or passengers';\n            this.showwarning(inner);\n        }\n        if(go == 0){\n            let inner = 'Do not have an avilable plane of the required type.\\nBuy a new plane or wait for the current flights to return.'\n            this.showwarning(inner);\n        }\n    },\n\n    hidewarning(){\n        this.warning_window.active = false;\n    },\n\n    toactive(){\n        this.activeflights.active = true;\n        this.flights.active = false;\n    },\n\n    toflightlist(){\n        this.flights.active = true;\n        this.activeflights.active = false;\n    },\n\n    showwarning(inner){\n        this.warning_window.getChildByName(\"warning_window\").getChildByName(\"inner\").getComponent(cc.Label).string = inner;\n        this.warning_window.active = true;\n    },\n});\n"]}