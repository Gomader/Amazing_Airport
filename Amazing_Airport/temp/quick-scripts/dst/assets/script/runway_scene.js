
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/script/runway_scene.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '660dfXmAJ1O54O3BLVKKhKx', 'runway_scene');
// script/runway_scene.js

"use strict";

var userdata = require('userdata');

cc.Class({
  "extends": cc.Component,
  properties: {
    userid: cc.Integer,
    runway: {
      type: cc.Node,
      "default": null
    },
    road: {
      type: cc.Node,
      "default": null
    },
    stand: {
      type: cc.Node,
      "default": null
    },
    airplaneOnStand: {
      type: cc.Node,
      "default": null
    },
    username: {
      type: cc.Label,
      "default": null
    },
    stars: {
      type: cc.Label,
      "default": null
    },
    fuel: {
      type: cc.ProgressBar,
      "default": null
    },
    fuelnum: {
      type: cc.Label,
      "default": null
    },
    fuelclock: {
      type: cc.Node,
      "default": null
    },
    fuelclocknumber: {
      type: cc.Label,
      "default": null
    },
    passenger: {
      type: cc.ProgressBar,
      "default": null
    },
    passengernum: {
      type: cc.Label,
      "default": null
    },
    passengerclock: {
      type: cc.Node,
      "default": null
    },
    passengerclocknumber: {
      type: cc.Label,
      "default": null
    },
    coins: {
      type: cc.Label,
      "default": null
    },
    warning_window: {
      type: cc.Node,
      "default": null
    },
    flyingairplanes: {
      type: cc.Node,
      "default": null
    },
    maxfuel: cc.Integer,
    maxpassenger: cc.Integer,
    allclock: Object,
    time: cc.Integer
  },
  // LIFE-CYCLE CALLBACKS:
  onLoad: function onLoad() {
    this.node.opacity = 0;
    this.userid = cc.sys.localStorage.getItem("id");
    this.allclock = {
      fuelclock: {
        runstate: false,
        timenumber: 0
      },
      passengerclock: {
        runstate: false,
        timenumber: 0
      }
    }, userdata.lefts = {
      leftfuel: 0,
      leftpassenger: 0
    };
    userdata.runwaystate = [false, false];
    userdata.businesslist = [];
    this.newuser();
    this.backtogame();
  },
  start: function start() {
    this.startclock();
    this.node.runAction(cc.fadeIn(1.0));
  },
  update: function update(dt) {
    this.showmap();
  },
  newuser: function newuser() {
    if (this.userid == null) {
      cc.director.loadScene("homepage_scene");
    } else {
      this.node.runAction(cc.sequence(cc.callFunc(this.downloadAirplaneData, this), cc.callFunc(this.downloadUserData, this), cc.callFunc(this.inits, this), cc.callFunc(this.downloadAchievementData, this)));
    }
  },
  downloadUserData: function downloadUserData() {
    var xhr = new XMLHttpRequest();
    xhr.open("POST", "https://www.zhangmingzhe.cn/amazing_airport/amazing_airport.php?module=1", true);
    xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    xhr.send("id=" + this.userid);

    xhr.onreadystatechange = function () {
      if (xhr.readyState == 4 && xhr.status >= 200 && xhr.status < 400) {
        if (xhr.responseText != 0) {
          var data = JSON.parse(xhr.responseText);
          userdata.allfile = data;
        }
      }
    };
  },
  uploadUserData: function uploadUserData() {
    var xhr = new XMLHttpRequest();
    xhr.open("POST", "https://www.zhangmingzhe.cn/amazing_airport/amazing_airport.php?module=2", true);
    xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    xhr.send("id=" + this.userid + "&userData=" + JSON.stringify(userdata.allfile));

    xhr.onreadystatechange = function () {
      if (xhr.readyState == 4 && xhr.status >= 200 && xhr.status < 400) {
        if (xhr.responseText == 1) {
          console.log(1);
        }
      }
    };
  },
  downloadAirplaneData: function downloadAirplaneData() {
    var xhr = new XMLHttpRequest();
    xhr.open("POST", "https://www.zhangmingzhe.cn/amazing_airport/amazing_airport.php?module=3", true);
    xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    xhr.send("id=" + this.userid);

    xhr.onreadystatechange = function () {
      if (xhr.readyState == 4 && xhr.status >= 200 && xhr.status < 400) {
        if (xhr.responseText != 0) {
          console.log(1);
          var res = eval(xhr.responseText);
          var airplanelist = [];

          for (var i in res) {
            airplanelist.push(res[i]);
          }

          userdata.airplanedata = airplanelist;
        }
      }
    };
  },
  uploadAirplaneData: function uploadAirplaneData() {
    var list = [];

    for (var i in userdata.airplanedata) {
      list.push(JSON.stringify(userdata.airplanedata[i]));
    }

    var data = "[" + list.join(',') + "]";
    var xhr = new XMLHttpRequest();
    xhr.open("POST", "https://www.zhangmingzhe.cn/amazing_airport/amazing_airport.php?module=4", true);
    xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    xhr.send("id=" + this.userid + "&userData=" + data);

    xhr.onreadystatechange = function () {
      if (xhr.readyState == 4 && xhr.status >= 200 && xhr.status < 400) {
        if (xhr.responseText == 1) {
          console.log(1);
        }
      }
    };
  },
  downloadAchievementData: function downloadAchievementData() {
    var xhr = new XMLHttpRequest();
    xhr.open("POST", "https://www.zhangmingzhe.cn/amazing_airport/amazing_airport.php?module=5", true);
    xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    xhr.send("id=" + this.userid);

    xhr.onreadystatechange = function () {
      if (xhr.readyState == 4 && xhr.status >= 200 && xhr.status < 400) {
        if (xhr.responseText != 0) {
          console.log(1);
          var res = eval(xhr.responseText);
          var achievementlist = [];

          for (var i in res) {
            achievementlist.push(res[i]);
          }

          userdata.achievement = achievementlist;
        }
      }
    };
  },
  uploadAchievementData: function uploadAchievementData() {
    var list = '';

    for (var o in userdata.achievement) {
      list += "[" + userdata.achievement[o].join(',') + "],";
    }

    var data = "[" + list + "]";
    var xhr = new XMLHttpRequest();
    xhr.open("POST", "https://www.zhangmingzhe.cn/amazing_airport/amazing_airport.php?module=6", true);
    xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    xhr.send("id=" + this.userid + "&userData=" + data);

    xhr.onreadystatechange = function () {
      if (xhr.readyState == 4 && xhr.status >= 200 && xhr.status < 400) {
        if (xhr.responseText == 1) {
          console.log(1);
        }
      }
    };
  },
  backtogame: function backtogame() {
    var allfile = JSON.parse(cc.sys.localStorage.getItem("allfile"));
    var maxfuel = allfile.stars * 10 + allfile.buildings.fuel_station * 20 + 10;
    var maxpassenger = allfile.stars * 20 + allfile.buildings.terminal * 20;
    var leavetime = (Date.parse(new Date()) - cc.sys.localStorage.getItem("time")) / 1000;
    var left = JSON.parse(cc.sys.localStorage.getItem("lefts"));

    if (left.leftfuel >= maxfuel) {
      userdata.lefts.leftfuel = left.leftfuel;
    } else {
      var add = Math.floor(leavetime / 60) + left.leftfuel;

      if (add >= maxfuel) {
        userdata.lefts.leftfuel = maxfuel;
      } else {
        userdata.lefts.leftfuel = add;
      }
    }

    if (left.leftpassenger >= maxpassenger) {
      userdata.lefts.leftpassenger = left.leftpassenger;
    } else {
      var _add = Math.floor(leavetime / 60) + left.leftpassenger;

      if (_add >= maxpassenger) {
        userdata.lefts.leftpassenger = maxpassenger;
      } else {
        userdata.lefts.leftpassenger = _add;
      }
    }

    cc.sys.localStorage.setItem("lefts", JSON.stringify(userdata.lefts));
  },
  inits: function inits() {
    var stand = userdata.allfile.buildings.stand;
    var standinit = {
      "state": false
    };
    var state = [];

    for (var i = 0; i < stand; i++) {
      state.push(standinit);
    }

    userdata.standstate = state;

    for (var o in userdata.airplanedata) {
      if (userdata.airplanedata[o].isflying == 'false') {
        for (var i = 0; i < stand; i++) {
          if (userdata.standstate[i] == false) {
            userdata.standstate[i] == true;
          } else {
            continue;
          }
        }
      }
    }
  },
  showmap: function showmap() {
    this.runway.getChildByName("up").getChildByName(userdata.allfile.buildings.uprunway.toString()).active = true;
    this.runway.getChildByName("down").getChildByName(userdata.allfile.buildings.downrunway.toString()).active = true;

    if (userdata.allfile.buildings.uprunway >= 9 && userdata.allfile.buildings.downrunway >= 9) {
      this.road.getChildByName("9-9").active = true;
    } else if (userdata.allfile.buildings.uprunway >= 6 && userdata.allfile.buildings.downrunway >= 6) {
      this.road.getChildByName("6-6").active = true;
    } else if (userdata.allfile.buildings.uprunway >= 3 && userdata.allfile.buildings.downrunway >= 3) {
      this.road.getChildByName("3-3").active = true;
    } else {
      this.road.getChildByName("1-1").active = true;
    }

    this.username.string = userdata.allfile.name;
    this.stars.string = userdata.allfile.stars;
    this.coins.string = userdata.allfile.money;
    this.maxfuel = userdata.allfile.stars * 10 + userdata.allfile.buildings.fuel_station * 20 + 10;
    this.maxpassenger = userdata.allfile.stars * 20 + userdata.allfile.buildings.terminal * 20;
    this.fuel.progress = userdata.lefts.leftfuel / this.maxfuel;
    this.fuelnum.string = userdata.lefts.leftfuel.toString() + "/" + this.maxfuel.toString();
    this.passenger.progress = userdata.lefts.leftpassenger / this.maxpassenger;
    this.passengernum.string = userdata.lefts.leftpassenger.toString() + "/" + this.maxpassenger.toString();

    if (userdata.lefts.leftfuel < this.maxfuel && this.allclock.fuelclock.runstate == false) {
      this.allclock.fuelclock.runstate = true;
      this.fuelclock.active = true;
    }

    if (userdata.lefts.leftpassenger < this.maxpassenger && this.allclock.passengerclock.runstate == false) {
      this.allclock.passengerclock.runstate = true;
      this.passengerclock.active = true;
    }

    var flys = 0;

    for (var o in userdata.airplanedata) {
      if (userdata.airplanedata[o].isflying == 'true') {
        flys += 1;
      }
    }

    if (flys != 0) {
      this.flyingairplanes.active = true;
      this.flyingairplanes.getChildByName("planes").getComponent(cc.Label).string = flys.toString();
    } else {
      this.flyingairplanes.active = false;
    }
  },
  startclock: function startclock() {
    this.callback = function () {
      cc.sys.localStorage.setItem("time", Date.parse(new Date()));
      userdata = require('userdata');
      this.uploadAirplaneData();
      this.uploadAchievementData();
      this.uploadUserData();

      if (this.allclock.fuelclock.runstate == true) {
        this.allclock.fuelclock.timenumber += 1;

        if (this.allclock.fuelclock.timenumber == 60) {
          this.allclock.fuelclock.timenumber = 0;
          userdata.lefts.leftfuel += 1;
        }

        if (this.allclock.fuelclock.timenumber < 10) {
          this.fuelclocknumber.string = "0" + this.allclock.fuelclock.timenumber.toString();
        } else {
          this.fuelclocknumber.string = this.allclock.fuelclock.timenumber.toString();
        }

        if (userdata.lefts.leftfuel >= this.maxfuel) {
          this.allclock.fuelclock.runstate = false;
          this.allclock.fuelclock.timenumber = 0;
          this.fuelclock.active = false;
        }
      }

      if (this.allclock.passengerclock.runstate == true) {
        this.allclock.passengerclock.timenumber += 1;

        if (this.allclock.passengerclock.timenumber == 60) {
          this.allclock.passengerclock.timenumber = 0;
          userdata.lefts.leftpassenger += 1;
        }

        if (this.allclock.passengerclock.timenumber < 10) {
          this.passengerclocknumber.string = "0" + this.allclock.passengerclock.timenumber.toString();
        } else {
          this.passengerclocknumber.string = this.allclock.passengerclock.timenumber.toString();
        }

        if (userdata.lefts.leftpassenger >= this.maxpassenger) {
          this.allclock.passengerclock.runstate = false;
          this.allclock.passengerclock.timenumber = 0;
          this.passengerclock.active = false;
        }
      }

      if (this.time == 60) {
        cc.sys.localStorage.setItem("lefts", JSON.stringify(userdata.lefts));
        cc.sys.localStorage.setItem("allfile", JSON.stringify(userdata.allfile));
        this.time = 0;
      } else {
        this.time += 1;
      }
    };

    this.schedule(function () {
      this.callback();
    }, 1);
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9zY3JpcHQvcnVud2F5X3NjZW5lLmpzIl0sIm5hbWVzIjpbInVzZXJkYXRhIiwicmVxdWlyZSIsImNjIiwiQ2xhc3MiLCJDb21wb25lbnQiLCJwcm9wZXJ0aWVzIiwidXNlcmlkIiwiSW50ZWdlciIsInJ1bndheSIsInR5cGUiLCJOb2RlIiwicm9hZCIsInN0YW5kIiwiYWlycGxhbmVPblN0YW5kIiwidXNlcm5hbWUiLCJMYWJlbCIsInN0YXJzIiwiZnVlbCIsIlByb2dyZXNzQmFyIiwiZnVlbG51bSIsImZ1ZWxjbG9jayIsImZ1ZWxjbG9ja251bWJlciIsInBhc3NlbmdlciIsInBhc3Nlbmdlcm51bSIsInBhc3NlbmdlcmNsb2NrIiwicGFzc2VuZ2VyY2xvY2tudW1iZXIiLCJjb2lucyIsIndhcm5pbmdfd2luZG93IiwiZmx5aW5nYWlycGxhbmVzIiwibWF4ZnVlbCIsIm1heHBhc3NlbmdlciIsImFsbGNsb2NrIiwiT2JqZWN0IiwidGltZSIsIm9uTG9hZCIsIm5vZGUiLCJvcGFjaXR5Iiwic3lzIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsInJ1bnN0YXRlIiwidGltZW51bWJlciIsImxlZnRzIiwibGVmdGZ1ZWwiLCJsZWZ0cGFzc2VuZ2VyIiwicnVud2F5c3RhdGUiLCJidXNpbmVzc2xpc3QiLCJuZXd1c2VyIiwiYmFja3RvZ2FtZSIsInN0YXJ0Iiwic3RhcnRjbG9jayIsInJ1bkFjdGlvbiIsImZhZGVJbiIsInVwZGF0ZSIsImR0Iiwic2hvd21hcCIsImRpcmVjdG9yIiwibG9hZFNjZW5lIiwic2VxdWVuY2UiLCJjYWxsRnVuYyIsImRvd25sb2FkQWlycGxhbmVEYXRhIiwiZG93bmxvYWRVc2VyRGF0YSIsImluaXRzIiwiZG93bmxvYWRBY2hpZXZlbWVudERhdGEiLCJ4aHIiLCJYTUxIdHRwUmVxdWVzdCIsIm9wZW4iLCJzZXRSZXF1ZXN0SGVhZGVyIiwic2VuZCIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsInJlYWR5U3RhdGUiLCJzdGF0dXMiLCJyZXNwb25zZVRleHQiLCJkYXRhIiwiSlNPTiIsInBhcnNlIiwiYWxsZmlsZSIsInVwbG9hZFVzZXJEYXRhIiwic3RyaW5naWZ5IiwiY29uc29sZSIsImxvZyIsInJlcyIsImV2YWwiLCJhaXJwbGFuZWxpc3QiLCJpIiwicHVzaCIsImFpcnBsYW5lZGF0YSIsInVwbG9hZEFpcnBsYW5lRGF0YSIsImxpc3QiLCJqb2luIiwiYWNoaWV2ZW1lbnRsaXN0IiwiYWNoaWV2ZW1lbnQiLCJ1cGxvYWRBY2hpZXZlbWVudERhdGEiLCJvIiwiYnVpbGRpbmdzIiwiZnVlbF9zdGF0aW9uIiwidGVybWluYWwiLCJsZWF2ZXRpbWUiLCJEYXRlIiwibGVmdCIsImFkZCIsIk1hdGgiLCJmbG9vciIsInNldEl0ZW0iLCJzdGFuZGluaXQiLCJzdGF0ZSIsInN0YW5kc3RhdGUiLCJpc2ZseWluZyIsImdldENoaWxkQnlOYW1lIiwidXBydW53YXkiLCJ0b1N0cmluZyIsImFjdGl2ZSIsImRvd25ydW53YXkiLCJzdHJpbmciLCJuYW1lIiwibW9uZXkiLCJwcm9ncmVzcyIsImZseXMiLCJnZXRDb21wb25lbnQiLCJjYWxsYmFjayIsInNjaGVkdWxlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUNBLElBQUlBLFFBQVEsR0FBR0MsT0FBTyxDQUFDLFVBQUQsQ0FBdEI7O0FBRUFDLEVBQUUsQ0FBQ0MsS0FBSCxDQUFTO0FBQ0wsYUFBU0QsRUFBRSxDQUFDRSxTQURQO0FBR0xDLEVBQUFBLFVBQVUsRUFBRTtBQUNSQyxJQUFBQSxNQUFNLEVBQUNKLEVBQUUsQ0FBQ0ssT0FERjtBQUVSQyxJQUFBQSxNQUFNLEVBQUM7QUFDSEMsTUFBQUEsSUFBSSxFQUFDUCxFQUFFLENBQUNRLElBREw7QUFFSCxpQkFBUTtBQUZMLEtBRkM7QUFNUkMsSUFBQUEsSUFBSSxFQUFDO0FBQ0RGLE1BQUFBLElBQUksRUFBQ1AsRUFBRSxDQUFDUSxJQURQO0FBRUQsaUJBQVE7QUFGUCxLQU5HO0FBVVJFLElBQUFBLEtBQUssRUFBQztB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S0FBS2xGLFFBQUwsQ0FBY1AsY0FBZCxDQUE2QmlCLFVBQTdCLENBQXdDcUUsUUFBeEMsRUFBbkM7QUFDSDs7QUFDRCxZQUFHOUcsUUFBUSxDQUFDMEMsS0FBVCxDQUFlRSxhQUFmLElBQThCLEtBQUtkLFlBQXRDLEVBQW1EO0FBQy9DLGVBQUtDLFFBQUwsQ0FBY1AsY0FBZCxDQUE2QmdCLFFBQTdCLEdBQXdDLEtBQXhDO0FBQ0EsZUFBS1QsUUFBTCxDQUFjUCxjQUFkLENBQTZCaUIsVUFBN0IsR0FBMEMsQ0FBMUM7QUFDQSxlQUFLakIsY0FBTCxDQUFvQnVGLE1BQXBCLEdBQTZCLEtBQTdCO0FBQ0g7QUFDSjs7QUFFRCxVQUFHLEtBQUs5RSxJQUFMLElBQWEsRUFBaEIsRUFBbUI7QUFDZi9CLFFBQUFBLEVBQUUsQ0FBQ21DLEdBQUgsQ0FBT0MsWUFBUCxDQUFvQmlFLE9BQXBCLENBQTRCLE9BQTVCLEVBQW9DN0IsSUFBSSxDQUFDSSxTQUFMLENBQWU5RSxRQUFRLENBQUMwQyxLQUF4QixDQUFwQztBQUNBeEMsUUFBQUEsRUFBRSxDQUFDbUMsR0FBSCxDQUFPQyxZQUFQLENBQW9CaUUsT0FBcEIsQ0FBNEIsU0FBNUIsRUFBc0M3QixJQUFJLENBQUNJLFNBQUwsQ0FBZTlFLFFBQVEsQ0FBQzRFLE9BQXhCLENBQXRDO0FBQ0EsYUFBSzNDLElBQUwsR0FBWSxDQUFaO0FBQ0gsT0FKRCxNQUlLO0FBQ0QsYUFBS0EsSUFBTCxJQUFhLENBQWI7QUFDSDtBQUVKLEtBdEREOztBQXVEQSxTQUFLdUYsUUFBTCxDQUFjLFlBQVU7QUFDcEIsV0FBS0QsUUFBTDtBQUNILEtBRkQsRUFFRSxDQUZGO0FBR0g7QUE1WEksQ0FBVCIsInNvdXJjZVJvb3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsiXG52YXIgdXNlcmRhdGEgPSByZXF1aXJlKCd1c2VyZGF0YScpO1xuXG5jYy5DbGFzcyh7XG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxuXG4gICAgcHJvcGVydGllczoge1xuICAgICAgICB1c2VyaWQ6Y2MuSW50ZWdlcixcbiAgICAgICAgcnVud2F5OntcbiAgICAgICAgICAgIHR5cGU6Y2MuTm9kZSxcbiAgICAgICAgICAgIGRlZmF1bHQ6bnVsbFxuICAgICAgICB9LFxuICAgICAgICByb2FkOntcbiAgICAgICAgICAgIHR5cGU6Y2MuTm9kZSxcbiAgICAgICAgICAgIGRlZmF1bHQ6bnVsbFxuICAgICAgICB9LFxuICAgICAgICBzdGFuZDp7XG4gICAgICAgICAgICB0eXBlOmNjLk5vZGUsXG4gICAgICAgICAgICBkZWZhdWx0Om51bGxcbiAgICAgICAgfSxcbiAgICAgICAgYWlycGxhbmVPblN0YW5kOntcbiAgICAgICAgICAgIHR5cGU6Y2MuTm9kZSxcbiAgICAgICAgICAgIGRlZmF1bHQ6bnVsbFxuICAgICAgICB9LFxuICAgICAgICB1c2VybmFtZTp7XG4gICAgICAgICAgICB0eXBlOmNjLkxhYmVsLFxuICAgICAgICAgICAgZGVmYXVsdDpudWxsXG4gICAgICAgIH0sXG4gICAgICAgIHN0YXJzOntcbiAgICAgICAgICAgIHR5cGU6Y2MuTGFiZWwsXG4gICAgICAgICAgICBkZWZhdWx0Om51bGxcbiAgICAgICAgfSxcbiAgICAgICAgZnVlbDp7XG4gICAgICAgICAgICB0eXBlOmNjLlByb2dyZXNzQmFyLFxuICAgICAgICAgICAgZGVmYXVsdDpudWxsXG4gICAgICAgIH0sXG4gICAgICAgIGZ1ZWxudW06e1xuICAgICAgICAgICAgdHlwZTpjYy5MYWJlbCxcbiAgICAgICAgICAgIGRlZmF1bHQ6bnVsbFxuICAgICAgICB9LFxuICAgICAgICBmdWVsY2xvY2s6e1xuICAgICAgICAgICAgdHlwZTpjYy5Ob2RlLFxuICAgICAgICAgICAgZGVmYXVsdDpudWxsXG4gICAgICAgIH0sXG4gICAgICAgIGZ1ZWxjbG9ja251bWJlcjp7XG4gICAgICAgICAgICB0eXBlOmNjLkxhYmVsLFxuICAgICAgICAgICAgZGVmYXVsdDpudWxsXG4gICAgICAgIH0sXG4gICAgICAgIHBhc3Nlbmdlcjp7XG4gICAgICAgICAgICB0eXBlOmNjLlByb2dyZXNzQmFyLFxuICAgICAgICAgICAgZGVmYXVsdDpudWxsXG4gICAgICAgIH0sXG4gICAgICAgIHBhc3Nlbmdlcm51bTp7XG4gICAgICAgICAgICB0eXBlOmNjLkxhYmVsLFxuICAgICAgICAgICAgZGVmYXVsdDpudWxsXG4gICAgICAgIH0sXG4gICAgICAgIHBhc3NlbmdlcmNsb2NrOntcbiAgICAgICAgICAgIHR5cGU6Y2MuTm9kZSxcbiAgICAgICAgICAgIGRlZmF1bHQ6bnVsbFxuICAgICAgICB9LFxuICAgICAgICBwYXNzZW5nZXJjbG9ja251bWJlcjp7XG4gICAgICAgICAgICB0eXBlOmNjLkxhYmVsLFxuICAgICAgICAgICAgZGVmYXVsdDpudWxsXG4gICAgICAgIH0sXG4gICAgICAgIGNvaW5zOntcbiAgICAgICAgICAgIHR5cGU6Y2MuTGFiZWwsXG4gICAgICAgICAgICBkZWZhdWx0Om51bGxcbiAgICAgICAgfSxcbiAgICAgICAgd2FybmluZ193aW5kb3c6e1xuICAgICAgICAgICAgdHlwZTpjYy5Ob2RlLFxuICAgICAgICAgICAgZGVmYXVsdDpudWxsXG4gICAgICAgIH0sXG4gICAgICAgIGZseWluZ2FpcnBsYW5lczp7XG4gICAgICAgICAgICB0eXBlOmNjLk5vZGUsXG4gICAgICAgICAgICBkZWZhdWx0Om51bGxcbiAgICAgICAgfSxcbiAgICAgICAgbWF4ZnVlbDpjYy5JbnRlZ2VyLFxuICAgICAgICBtYXhwYXNzZW5nZXI6Y2MuSW50ZWdlcixcbiAgICAgICAgYWxsY2xvY2s6T2JqZWN0LFxuICAgICAgICB0aW1lOmNjLkludGVnZXIsXG4gICAgfSxcblxuICAgIC8vIExJRkUtQ1lDTEUgQ0FMTEJBQ0tTOlxuXG4gICAgb25Mb2FkICgpIHtcbiAgICAgICAgdGhpcy5ub2RlLm9wYWNpdHkgPSAwO1xuICAgICAgICB0aGlzLnVzZXJpZCA9IGNjLnN5cy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImlkXCIpO1xuICAgICAgICB0aGlzLmFsbGNsb2NrID0ge1xuICAgICAgICAgICAgZnVlbGNsb2NrIDoge1xuICAgICAgICAgICAgICAgIHJ1bnN0YXRlOmZhbHNlLFxuICAgICAgICAgICAgICAgIHRpbWVudW1iZXI6MFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHBhc3NlbmdlcmNsb2NrIDoge1xuICAgICAgICAgICAgICAgIHJ1bnN0YXRlOmZhbHNlLFxuICAgICAgICAgICAgICAgIHRpbWVudW1iZXI6MFxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB1c2VyZGF0YS5sZWZ0cyA9IHtcbiAgICAgICAgICAgIGxlZnRmdWVsOjAsXG4gICAgICAgICAgICBsZWZ0cGFzc2VuZ2VyOjBcbiAgICAgICAgfVxuICAgICAgICB1c2VyZGF0YS5ydW53YXlzdGF0ZSA9IFtmYWxzZSxmYWxzZV07XG4gICAgICAgIHVzZXJkYXRhLmJ1c2luZXNzbGlzdCA9IFtdO1xuICAgICAgICB0aGlzLm5ld3VzZXIoKTtcbiAgICAgICAgdGhpcy5iYWNrdG9nYW1lKCk7XG4gICAgfSxcblxuICAgIHN0YXJ0ICgpIHtcbiAgICAgICAgdGhpcy5zdGFydGNsb2NrKCk7XG4gICAgICAgIHRoaXMubm9kZS5ydW5BY3Rpb24oY2MuZmFkZUluKDEuMCkpO1xuICAgIH0sXG5cbiAgICB1cGRhdGUgKGR0KSB7XG4gICAgICAgIHRoaXMuc2hvd21hcCgpO1xuICAgIH0sXG5cbiAgICBuZXd1c2VyOmZ1bmN0aW9uKCl7XG4gICAgICAgIGlmKHRoaXMudXNlcmlkPT1udWxsKXtcbiAgICAgICAgICAgIGNjLmRpcmVjdG9yLmxvYWRTY2VuZShcImhvbWVwYWdlX3NjZW5lXCIpO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIHRoaXMubm9kZS5ydW5BY3Rpb24oY2Muc2VxdWVuY2UoY2MuY2FsbEZ1bmModGhpcy5kb3dubG9hZEFpcnBsYW5lRGF0YSx0aGlzKSxjYy5jYWxsRnVuYyh0aGlzLmRvd25sb2FkVXNlckRhdGEsdGhpcyksY2MuY2FsbEZ1bmModGhpcy5pbml0cyx0aGlzKSxjYy5jYWxsRnVuYyh0aGlzLmRvd25sb2FkQWNoaWV2ZW1lbnREYXRhLHRoaXMpKSk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgZG93bmxvYWRVc2VyRGF0YTpmdW5jdGlvbigpe1xuICAgICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgIHhoci5vcGVuKFwiUE9TVFwiLCBcImh0dHBzOi8vd3d3LnpoYW5nbWluZ3poZS5jbi9hbWF6aW5nX2FpcnBvcnQvYW1hemluZ19haXJwb3J0LnBocD9tb2R1bGU9MVwiLCB0cnVlKTtcbiAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LXR5cGVcIixcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiKTtcbiAgICAgICAgeGhyLnNlbmQoXCJpZD1cIiArIHRoaXMudXNlcmlkKTtcbiAgICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh4aHIucmVhZHlTdGF0ZSA9PSA0ICYmICh4aHIuc3RhdHVzID49IDIwMCAmJiB4aHIuc3RhdHVzIDwgNDAwKSkge1xuICAgICAgICAgICAgICAgIGlmICh4aHIucmVzcG9uc2VUZXh0ICE9IDApe1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlVGV4dCk7XG4gICAgICAgICAgICAgICAgICAgIHVzZXJkYXRhLmFsbGZpbGUgPSBkYXRhO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICB1cGxvYWRVc2VyRGF0YTpmdW5jdGlvbigpe1xuICAgICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgIHhoci5vcGVuKFwiUE9TVFwiLCBcImh0dHBzOi8vd3d3LnpoYW5nbWluZ3poZS5jbi9hbWF6aW5nX2FpcnBvcnQvYW1hemluZ19haXJwb3J0LnBocD9tb2R1bGU9MlwiLCB0cnVlKTtcbiAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LXR5cGVcIixcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiKTtcbiAgICAgICAgeGhyLnNlbmQoXCJpZD1cIiArIHRoaXMudXNlcmlkICsgXCImdXNlckRhdGE9XCIgKyBKU09OLnN0cmluZ2lmeSh1c2VyZGF0YS5hbGxmaWxlKSk7XG4gICAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoeGhyLnJlYWR5U3RhdGUgPT0gNCAmJiAoeGhyLnN0YXR1cyA+PSAyMDAgJiYgeGhyLnN0YXR1cyA8IDQwMCkpIHtcbiAgICAgICAgICAgICAgICBpZih4aHIucmVzcG9uc2VUZXh0ID09IDEpe1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgZG93bmxvYWRBaXJwbGFuZURhdGE6ZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgICB4aHIub3BlbihcIlBPU1RcIiwgXCJodHRwczovL3d3dy56aGFuZ21pbmd6aGUuY24vYW1hemluZ19haXJwb3J0L2FtYXppbmdfYWlycG9ydC5waHA/bW9kdWxlPTNcIiwgdHJ1ZSk7XG4gICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC10eXBlXCIsXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIik7XG4gICAgICAgIHhoci5zZW5kKFwiaWQ9XCIgKyB0aGlzLnVzZXJpZCk7XG4gICAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoeGhyLnJlYWR5U3RhdGUgPT0gNCAmJiAoeGhyLnN0YXR1cyA+PSAyMDAgJiYgeGhyLnN0YXR1cyA8IDQwMCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoeGhyLnJlc3BvbnNlVGV4dCAhPSAwKXtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coMSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXMgPSBldmFsKHhoci5yZXNwb25zZVRleHQpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgYWlycGxhbmVsaXN0ID0gW107XG4gICAgICAgICAgICAgICAgICAgIGZvcih2YXIgaSBpbiByZXMpe1xuICAgICAgICAgICAgICAgICAgICAgICAgYWlycGxhbmVsaXN0LnB1c2gocmVzW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB1c2VyZGF0YS5haXJwbGFuZWRhdGEgPSBhaXJwbGFuZWxpc3Q7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcblxuICAgIHVwbG9hZEFpcnBsYW5lRGF0YTpmdW5jdGlvbigpe1xuICAgICAgICB2YXIgbGlzdCA9IFtdO1xuICAgICAgICBmb3IodmFyIGkgaW4gdXNlcmRhdGEuYWlycGxhbmVkYXRhKXtcbiAgICAgICAgICAgIGxpc3QucHVzaChKU09OLnN0cmluZ2lmeSh1c2VyZGF0YS5haXJwbGFuZWRhdGFbaV0pKVxuICAgICAgICB9XG4gICAgICAgIHZhciBkYXRhID0gXCJbXCIgKyBsaXN0LmpvaW4oJywnKSArIFwiXVwiO1xuICAgICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgIHhoci5vcGVuKFwiUE9TVFwiLCBcImh0dHBzOi8vd3d3LnpoYW5nbWluZ3poZS5jbi9hbWF6aW5nX2FpcnBvcnQvYW1hemluZ19haXJwb3J0LnBocD9tb2R1bGU9NFwiLCB0cnVlKTtcbiAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LXR5cGVcIixcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiKTtcbiAgICAgICAgeGhyLnNlbmQoXCJpZD1cIiArIHRoaXMudXNlcmlkICsgXCImdXNlckRhdGE9XCIgKyBkYXRhKTtcbiAgICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh4aHIucmVhZHlTdGF0ZSA9PSA0ICYmICh4aHIuc3RhdHVzID49IDIwMCAmJiB4aHIuc3RhdHVzIDwgNDAwKSkge1xuICAgICAgICAgICAgICAgIGlmKHhoci5yZXNwb25zZVRleHQgPT0gMSl7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBkb3dubG9hZEFjaGlldmVtZW50RGF0YTpmdW5jdGlvbigpe1xuICAgICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgIHhoci5vcGVuKFwiUE9TVFwiLCBcImh0dHBzOi8vd3d3LnpoYW5nbWluZ3poZS5jbi9hbWF6aW5nX2FpcnBvcnQvYW1hemluZ19haXJwb3J0LnBocD9tb2R1bGU9NVwiLCB0cnVlKTtcbiAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LXR5cGVcIixcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiKTtcbiAgICAgICAgeGhyLnNlbmQoXCJpZD1cIiArIHRoaXMudXNlcmlkKTtcbiAgICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh4aHIucmVhZHlTdGF0ZSA9PSA0ICYmICh4aHIuc3RhdHVzID49IDIwMCAmJiB4aHIuc3RhdHVzIDwgNDAwKSkge1xuICAgICAgICAgICAgICAgIGlmICh4aHIucmVzcG9uc2VUZXh0ICE9IDApe1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygxKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlcyA9IGV2YWwoeGhyLnJlc3BvbnNlVGV4dCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhY2hpZXZlbWVudGxpc3QgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBpIGluIHJlcyl7XG4gICAgICAgICAgICAgICAgICAgICAgICBhY2hpZXZlbWVudGxpc3QucHVzaChyZXNbaV0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHVzZXJkYXRhLmFjaGlldmVtZW50ID0gYWNoaWV2ZW1lbnRsaXN0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICB1cGxvYWRBY2hpZXZlbWVudERhdGE6ZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyIGxpc3QgPSAnJztcbiAgICAgICAgZm9yKHZhciBvIGluIHVzZXJkYXRhLmFjaGlldmVtZW50KXtcbiAgICAgICAgICAgIGxpc3QgKz0gXCJbXCIgKyB1c2VyZGF0YS5hY2hpZXZlbWVudFtvXS5qb2luKCcsJykgKyBcIl0sXCI7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGRhdGEgPSBcIltcIiArIGxpc3QgKyBcIl1cIjtcbiAgICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgICB4aHIub3BlbihcIlBPU1RcIiwgXCJodHRwczovL3d3dy56aGFuZ21pbmd6aGUuY24vYW1hemluZ19haXJwb3J0L2FtYXppbmdfYWlycG9ydC5waHA/bW9kdWxlPTZcIiwgdHJ1ZSk7XG4gICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC10eXBlXCIsXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIik7XG4gICAgICAgIHhoci5zZW5kKFwiaWQ9XCIgKyB0aGlzLnVzZXJpZCArIFwiJnVzZXJEYXRhPVwiICsgZGF0YSk7XG4gICAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoeGhyLnJlYWR5U3RhdGUgPT0gNCAmJiAoeGhyLnN0YXR1cyA+PSAyMDAgJiYgeGhyLnN0YXR1cyA8IDQwMCkpIHtcbiAgICAgICAgICAgICAgICBpZih4aHIucmVzcG9uc2VUZXh0ID09IDEpe1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgYmFja3RvZ2FtZTpmdW5jdGlvbigpe1xuICAgICAgICB2YXIgYWxsZmlsZSA9IEpTT04ucGFyc2UoY2Muc3lzLmxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiYWxsZmlsZVwiKSk7XG4gICAgICAgIHZhciBtYXhmdWVsID0gYWxsZmlsZS5zdGFycyAqIDEwICsgYWxsZmlsZS5idWlsZGluZ3MuZnVlbF9zdGF0aW9uICogMjAgKyAxMDtcbiAgICAgICAgdmFyIG1heHBhc3NlbmdlciA9IGFsbGZpbGUuc3RhcnMgKiAyMCArIGFsbGZpbGUuYnVpbGRpbmdzLnRlcm1pbmFsICogMjA7XG4gICAgICAgIHZhciBsZWF2ZXRpbWUgPSAoRGF0ZS5wYXJzZShuZXcgRGF0ZSgpKSAtIGNjLnN5cy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInRpbWVcIikpLzEwMDA7XG4gICAgICAgIHZhciBsZWZ0ID0gSlNPTi5wYXJzZShjYy5zeXMubG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJsZWZ0c1wiKSk7XG4gICAgICAgIGlmKGxlZnQubGVmdGZ1ZWwgPj0gbWF4ZnVlbCl7XG4gICAgICAgICAgICB1c2VyZGF0YS5sZWZ0cy5sZWZ0ZnVlbCA9IGxlZnQubGVmdGZ1ZWw7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgbGV0IGFkZCA9IE1hdGguZmxvb3IobGVhdmV0aW1lLzYwKSArIGxlZnQubGVmdGZ1ZWw7XG4gICAgICAgICAgICBpZihhZGQgPj0gbWF4ZnVlbCl7XG4gICAgICAgICAgICAgICAgdXNlcmRhdGEubGVmdHMubGVmdGZ1ZWwgPSBtYXhmdWVsO1xuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgdXNlcmRhdGEubGVmdHMubGVmdGZ1ZWwgPSBhZGQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYobGVmdC5sZWZ0cGFzc2VuZ2VyID49IG1heHBhc3Nlbmdlcil7XG4gICAgICAgICAgICB1c2VyZGF0YS5sZWZ0cy5sZWZ0cGFzc2VuZ2VyID0gbGVmdC5sZWZ0cGFzc2VuZ2VyO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIGxldCBhZGQgPSBNYXRoLmZsb29yKGxlYXZldGltZS82MCkgKyBsZWZ0LmxlZnRwYXNzZW5nZXI7XG4gICAgICAgICAgICBpZihhZGQgPj0gbWF4cGFzc2VuZ2VyKXtcbiAgICAgICAgICAgICAgICB1c2VyZGF0YS5sZWZ0cy5sZWZ0cGFzc2VuZ2VyID0gbWF4cGFzc2VuZ2VyO1xuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgdXNlcmRhdGEubGVmdHMubGVmdHBhc3NlbmdlciA9IGFkZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYy5zeXMubG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJsZWZ0c1wiLEpTT04uc3RyaW5naWZ5KHVzZXJkYXRhLmxlZnRzKSk7XG4gICAgfSxcblxuICAgIGluaXRzOmZ1bmN0aW9uKCl7XG4gICAgICAgIHZhciBzdGFuZCA9IHVzZXJkYXRhLmFsbGZpbGUuYnVpbGRpbmdzLnN0YW5kO1xuICAgICAgICB2YXIgc3RhbmRpbml0ID0ge1wic3RhdGVcIjpmYWxzZX07XG4gICAgICAgIHZhciBzdGF0ZSA9IFtdO1xuICAgICAgICBmb3IodmFyIGkgPSAwO2kgPCBzdGFuZDsgaSsrKXtcbiAgICAgICAgICAgIHN0YXRlLnB1c2goc3RhbmRpbml0KTtcbiAgICAgICAgfVxuICAgICAgICB1c2VyZGF0YS5zdGFuZHN0YXRlID0gc3RhdGU7XG4gICAgICAgIGZvcih2YXIgbyBpbiB1c2VyZGF0YS5haXJwbGFuZWRhdGEpe1xuICAgICAgICAgICAgaWYodXNlcmRhdGEuYWlycGxhbmVkYXRhW29dLmlzZmx5aW5nPT0nZmFsc2UnKXtcbiAgICAgICAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgc3RhbmQ7IGkrKyl7XG4gICAgICAgICAgICAgICAgICAgIGlmKHVzZXJkYXRhLnN0YW5kc3RhdGVbaV09PWZhbHNlKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJkYXRhLnN0YW5kc3RhdGVbaV0gPT0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBzaG93bWFwOmZ1bmN0aW9uKCl7XG4gICAgICAgIHRoaXMucnVud2F5LmdldENoaWxkQnlOYW1lKFwidXBcIikuZ2V0Q2hpbGRCeU5hbWUodXNlcmRhdGEuYWxsZmlsZS5idWlsZGluZ3MudXBydW53YXkudG9TdHJpbmcoKSkuYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5ydW53YXkuZ2V0Q2hpbGRCeU5hbWUoXCJkb3duXCIpLmdldENoaWxkQnlOYW1lKHVzZXJkYXRhLmFsbGZpbGUuYnVpbGRpbmdzLmRvd25ydW53YXkudG9TdHJpbmcoKSkuYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgaWYodXNlcmRhdGEuYWxsZmlsZS5idWlsZGluZ3MudXBydW53YXk+PTkmJnVzZXJkYXRhLmFsbGZpbGUuYnVpbGRpbmdzLmRvd25ydW53YXk+PTkpe1xuICAgICAgICAgICAgdGhpcy5yb2FkLmdldENoaWxkQnlOYW1lKFwiOS05XCIpLmFjdGl2ZSA9IHRydWU7XG4gICAgICAgIH1lbHNlIGlmKHVzZXJkYXRhLmFsbGZpbGUuYnVpbGRpbmdzLnVwcnVud2F5Pj02JiZ1c2VyZGF0YS5hbGxmaWxlLmJ1aWxkaW5ncy5kb3ducnVud2F5Pj02KXtcbiAgICAgICAgICAgIHRoaXMucm9hZC5nZXRDaGlsZEJ5TmFtZShcIjYtNlwiKS5hY3RpdmUgPSB0cnVlO1xuICAgICAgICB9ZWxzZSBpZih1c2VyZGF0YS5hbGxmaWxlLmJ1aWxkaW5ncy51cHJ1bndheT49MyYmdXNlcmRhdGEuYWxsZmlsZS5idWlsZGluZ3MuZG93bnJ1bndheT49Myl7XG4gICAgICAgICAgICB0aGlzLnJvYWQuZ2V0Q2hpbGRCeU5hbWUoXCIzLTNcIikuYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICB0aGlzLnJvYWQuZ2V0Q2hpbGRCeU5hbWUoXCIxLTFcIikuYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnVzZXJuYW1lLnN0cmluZyA9IHVzZXJkYXRhLmFsbGZpbGUubmFtZTtcbiAgICAgICAgdGhpcy5zdGFycy5zdHJpbmcgPSB1c2VyZGF0YS5hbGxmaWxlLnN0YXJzO1xuICAgICAgICB0aGlzLmNvaW5zLnN0cmluZyA9IHVzZXJkYXRhLmFsbGZpbGUubW9uZXk7XG4gICAgICAgIHRoaXMubWF4ZnVlbCA9IHVzZXJkYXRhLmFsbGZpbGUuc3RhcnMgKiAxMCArIHVzZXJkYXRhLmFsbGZpbGUuYnVpbGRpbmdzLmZ1ZWxfc3RhdGlvbiAqIDIwICsgMTA7XG4gICAgICAgIHRoaXMubWF4cGFzc2VuZ2VyID0gdXNlcmRhdGEuYWxsZmlsZS5zdGFycyAqIDIwICsgdXNlcmRhdGEuYWxsZmlsZS5idWlsZGluZ3MudGVybWluYWwgKiAyMDtcbiAgICAgICAgdGhpcy5mdWVsLnByb2dyZXNzID0gdXNlcmRhdGEubGVmdHMubGVmdGZ1ZWwgLyB0aGlzLm1heGZ1ZWw7XG4gICAgICAgIHRoaXMuZnVlbG51bS5zdHJpbmcgPSB1c2VyZGF0YS5sZWZ0cy5sZWZ0ZnVlbC50b1N0cmluZygpICsgXCIvXCIgKyB0aGlzLm1heGZ1ZWwudG9TdHJpbmcoKTtcbiAgICAgICAgdGhpcy5wYXNzZW5nZXIucHJvZ3Jlc3MgPSB1c2VyZGF0YS5sZWZ0cy5sZWZ0cGFzc2VuZ2VyIC8gdGhpcy5tYXhwYXNzZW5nZXI7XG4gICAgICAgIHRoaXMucGFzc2VuZ2VybnVtLnN0cmluZyA9IHVzZXJkYXRhLmxlZnRzLmxlZnRwYXNzZW5nZXIudG9TdHJpbmcoKSArIFwiL1wiICsgdGhpcy5tYXhwYXNzZW5nZXIudG9TdHJpbmcoKTtcbiAgICAgICAgaWYgKHVzZXJkYXRhLmxlZnRzLmxlZnRmdWVsIDwgdGhpcy5tYXhmdWVsICYmIHRoaXMuYWxsY2xvY2suZnVlbGNsb2NrLnJ1bnN0YXRlID09IGZhbHNlKXtcbiAgICAgICAgICAgIHRoaXMuYWxsY2xvY2suZnVlbGNsb2NrLnJ1bnN0YXRlID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuZnVlbGNsb2NrLmFjdGl2ZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHVzZXJkYXRhLmxlZnRzLmxlZnRwYXNzZW5nZXIgPCB0aGlzLm1heHBhc3NlbmdlciAmJiB0aGlzLmFsbGNsb2NrLnBhc3NlbmdlcmNsb2NrLnJ1bnN0YXRlID09IGZhbHNlKXtcbiAgICAgICAgICAgIHRoaXMuYWxsY2xvY2sucGFzc2VuZ2VyY2xvY2sucnVuc3RhdGUgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5wYXNzZW5nZXJjbG9jay5hY3RpdmUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGxldCBmbHlzID0gMDtcbiAgICAgICAgZm9yKHZhciBvIGluIHVzZXJkYXRhLmFpcnBsYW5lZGF0YSl7XG4gICAgICAgICAgICBpZih1c2VyZGF0YS5haXJwbGFuZWRhdGFbb10uaXNmbHlpbmc9PSd0cnVlJyl7XG4gICAgICAgICAgICAgICAgZmx5cyArPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmKGZseXMhPTApe1xuICAgICAgICAgICAgdGhpcy5mbHlpbmdhaXJwbGFuZXMuYWN0aXZlPXRydWU7XG4gICAgICAgICAgICB0aGlzLmZseWluZ2FpcnBsYW5lcy5nZXRDaGlsZEJ5TmFtZShcInBsYW5lc1wiKS5nZXRDb21wb25lbnQoY2MuTGFiZWwpLnN0cmluZyA9IGZseXMudG9TdHJpbmcoKTtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICB0aGlzLmZseWluZ2FpcnBsYW5lcy5hY3RpdmU9ZmFsc2U7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgc3RhcnRjbG9jazpmdW5jdGlvbigpe1xuICAgICAgICB0aGlzLmNhbGxiYWNrID0gZnVuY3Rpb24oKXtcblxuICAgICAgICAgICAgY2Muc3lzLmxvY2FsU3RvcmFnZS5zZXRJdGVtKFwidGltZVwiLERhdGUucGFyc2UobmV3IERhdGUoKSkpO1xuXG4gICAgICAgICAgICB1c2VyZGF0YSA9IHJlcXVpcmUoJ3VzZXJkYXRhJyk7XG5cbiAgICAgICAgICAgIHRoaXMudXBsb2FkQWlycGxhbmVEYXRhKCk7XG4gICAgICAgICAgICB0aGlzLnVwbG9hZEFjaGlldmVtZW50RGF0YSgpO1xuICAgICAgICAgICAgdGhpcy51cGxvYWRVc2VyRGF0YSgpO1xuXG4gICAgICAgICAgICBpZih0aGlzLmFsbGNsb2NrLmZ1ZWxjbG9jay5ydW5zdGF0ZT09dHJ1ZSl7XG4gICAgICAgICAgICAgICAgdGhpcy5hbGxjbG9jay5mdWVsY2xvY2sudGltZW51bWJlciArPSAxO1xuICAgICAgICAgICAgICAgIGlmKHRoaXMuYWxsY2xvY2suZnVlbGNsb2NrLnRpbWVudW1iZXIgPT0gNjApe1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFsbGNsb2NrLmZ1ZWxjbG9jay50aW1lbnVtYmVyID0gMDtcbiAgICAgICAgICAgICAgICAgICAgdXNlcmRhdGEubGVmdHMubGVmdGZ1ZWwgKz0gMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYodGhpcy5hbGxjbG9jay5mdWVsY2xvY2sudGltZW51bWJlcjwxMCl7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZnVlbGNsb2NrbnVtYmVyLnN0cmluZyA9IFwiMFwiICsgdGhpcy5hbGxjbG9jay5mdWVsY2xvY2sudGltZW51bWJlci50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZ1ZWxjbG9ja251bWJlci5zdHJpbmcgPSB0aGlzLmFsbGNsb2NrLmZ1ZWxjbG9jay50aW1lbnVtYmVyLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmKHVzZXJkYXRhLmxlZnRzLmxlZnRmdWVsPj10aGlzLm1heGZ1ZWwpe1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFsbGNsb2NrLmZ1ZWxjbG9jay5ydW5zdGF0ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFsbGNsb2NrLmZ1ZWxjbG9jay50aW1lbnVtYmVyID0gMDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mdWVsY2xvY2suYWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZih0aGlzLmFsbGNsb2NrLnBhc3NlbmdlcmNsb2NrLnJ1bnN0YXRlPT10cnVlKXtcbiAgICAgICAgICAgICAgICB0aGlzLmFsbGNsb2NrLnBhc3NlbmdlcmNsb2NrLnRpbWVudW1iZXIgKz0gMTtcbiAgICAgICAgICAgICAgICBpZih0aGlzLmFsbGNsb2NrLnBhc3NlbmdlcmNsb2NrLnRpbWVudW1iZXIgPT0gNjApe1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFsbGNsb2NrLnBhc3NlbmdlcmNsb2NrLnRpbWVudW1iZXIgPSAwO1xuICAgICAgICAgICAgICAgICAgICB1c2VyZGF0YS5sZWZ0cy5sZWZ0cGFzc2VuZ2VyICs9IDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmKHRoaXMuYWxsY2xvY2sucGFzc2VuZ2VyY2xvY2sudGltZW51bWJlcjwxMCl7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFzc2VuZ2VyY2xvY2tudW1iZXIuc3RyaW5nID0gXCIwXCIgKyB0aGlzLmFsbGNsb2NrLnBhc3NlbmdlcmNsb2NrLnRpbWVudW1iZXIudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXNzZW5nZXJjbG9ja251bWJlci5zdHJpbmcgPSB0aGlzLmFsbGNsb2NrLnBhc3NlbmdlcmNsb2NrLnRpbWVudW1iZXIudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYodXNlcmRhdGEubGVmdHMubGVmdHBhc3Nlbmdlcj49dGhpcy5tYXhwYXNzZW5nZXIpe1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFsbGNsb2NrLnBhc3NlbmdlcmNsb2NrLnJ1bnN0YXRlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWxsY2xvY2sucGFzc2VuZ2VyY2xvY2sudGltZW51bWJlciA9IDA7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFzc2VuZ2VyY2xvY2suYWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZih0aGlzLnRpbWUgPT0gNjApe1xuICAgICAgICAgICAgICAgIGNjLnN5cy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShcImxlZnRzXCIsSlNPTi5zdHJpbmdpZnkodXNlcmRhdGEubGVmdHMpKTtcbiAgICAgICAgICAgICAgICBjYy5zeXMubG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJhbGxmaWxlXCIsSlNPTi5zdHJpbmdpZnkodXNlcmRhdGEuYWxsZmlsZSkpO1xuICAgICAgICAgICAgICAgIHRoaXMudGltZSA9IDA7XG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICB0aGlzLnRpbWUgKz0gMTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2NoZWR1bGUoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHRoaXMuY2FsbGJhY2soKTtcbiAgICAgICAgfSwxKVxuICAgIH0sXG59KTsiXX0=