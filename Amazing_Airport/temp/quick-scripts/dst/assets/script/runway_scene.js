
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/script/runway_scene.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '660dfXmAJ1O54O3BLVKKhKx', 'runway_scene');
// script/runway_scene.js

"use strict";

// Learn cc.Class:
//  - https://docs.cocos.com/creator/manual/en/scripting/class.html
// Learn Attribute:
//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html
// Learn life-cycle callbacks:
//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html
var userdata = require('userdata');

cc.Class({
  "extends": cc.Component,
  properties: {
    // foo: {
    //     // ATTRIBUTES:
    //     default: null,        // The default value will be used only when the component attaching
    //                           // to a node for the first time
    //     type: cc.SpriteFrame, // optional, default is typeof default
    //     serializable: true,   // optional, default is true
    // },
    // bar: {
    //     get () {
    //         return this._bar;
    //     },
    //     set (value) {
    //         this._bar = value;
    //     }
    // },
    userid: cc.Integer,
    runway: {
      type: cc.Node,
      "default": null
    },
    road: {
      type: cc.Node,
      "default": null
    },
    stand: {
      type: cc.Node,
      "default": null
    },
    username: {
      type: cc.Label,
      "default": null
    },
    stars: {
      type: cc.Label,
      "default": null
    },
    fuel: {
      type: cc.ProgressBar,
      "default": null
    },
    fuelnum: {
      type: cc.Label,
      "default": null
    },
    fuelclock: {
      type: cc.Node,
      "default": null
    },
    fuelclocknumber: {
      type: cc.Label,
      "default": null
    },
    passenger: {
      type: cc.ProgressBar,
      "default": null
    },
    passengernum: {
      type: cc.Label,
      "default": null
    },
    passengerclock: {
      type: cc.Node,
      "default": null
    },
    passengerclocknumber: {
      type: cc.Label,
      "default": null
    },
    coins: {
      type: cc.Label,
      "default": null
    },
    maxfuel: cc.Integer,
    maxpassenger: cc.Integer,
    allclock: Object,
    time: cc.Integer
  },
  // LIFE-CYCLE CALLBACKS:
  onLoad: function onLoad() {
    this.node.opacity = 0;
    this.userid = cc.sys.localStorage.getItem("id");
    this.allclock = {
      fuelclock: {
        runstate: false,
        timenumber: 0
      },
      passengerclock: {
        runstate: false,
        timenumber: 0
      }
    }, userdata.lefts = {
      leftfuel: 0,
      leftpassenger: 0
    };
    this.newuser();
    this.backtogame(cc.sys.localStorage.getItem("stars"));
  },
  start: function start() {
    this.node.runAction(cc.fadeIn(1.0));
    this.startclock();
    this.backtogame(cc.sys.localStorage.getItem("stars"));
  },
  update: function update(dt) {
    this.showmap();
  },
  newuser: function newuser() {
    if (this.userid == null) {
      cc.director.loadScene("homepage_scene");
    } else {
      this.downloadUserData();
    }
  },
  downloadUserData: function downloadUserData() {
    var xhr = new XMLHttpRequest();
    xhr.open("POST", "https://140.143.126.73/amazing_airport/amazing_airport.php?module=1", true);
    xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    xhr.send("id=" + this.userid);

    xhr.onreadystatechange = function () {
      if (xhr.readyState == 4 && xhr.status >= 200 && xhr.status < 400) {
        if (xhr.responseText != 0) {
          cc.sys.localStorage.setItem('userData', xhr.responseText);
          userdata.allfile = JSON.parse(xhr.responseText);
        }
      }
    };
  },
  uploadUserData: function uploadUserData() {
    var xhr = new XMLHttpRequest();
    xhr.open("POST", "https://140.143.126.73/amazing_airport/amazing_airport.php?module=2", true);
    xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    xhr.send("id=" + this.userid + "&userData=" + JSON.stringify(userdata.allfile));

    xhr.onreadystatechange = function () {
      if (xhr.readyState == 4 && xhr.status >= 200 && xhr.status < 400) {
        if (xhr.responseText == 1) {
          console.log(1);
        }
      }
    };
  },
  backtogame: function backtogame(stars) {
    var maxfuel = stars + 10;
    var maxpassenger = stars * 2 + 20;
    var leavetime = (Date.parse(new Date()) - cc.sys.localStorage.getItem("time")) / 1000;
    console.log(leavetime);
    var left = JSON.parse(cc.sys.localStorage.getItem("lefts"));
    console.log(left);

    if (left.leftfuel >= maxfuel) {
      userdata.lefts.leftfuel = left.leftfuel;
    } else {
      var add = Math.floor(leavetime / 60) + left.leftfuel;

      if (add >= maxfuel) {
        userdata.lefts.leftfuel = maxfuel;
      } else {
        userdata.lefts.leftfuel = add;
      }
    }

    if (left.leftpassenger >= maxpassenger) {
      userdata.lefts.leftpassenger = left.leftpassenger;
    } else {
      var add = Math.floor(leavetime / 60) + left.leftpassenger;

      if (add >= maxpassenger) {
        userdata.lefts.leftpassenger = maxpassenger;
      } else {
        userdata.lefts.leftpassenger = add;
      }
    }
  },
  showmap: function showmap() {
    this.runway.getChildByName("up").getChildByName(userdata.allfile.buildings.uprunway.toString()).active = true;
    this.runway.getChildByName("down").getChildByName(userdata.allfile.buildings.downrunway.toString()).active = true;

    if (userdata.allfile.buildings.uprunway >= 9 && userdata.allfile.buildings.downrunway >= 9) {
      this.road.getChildByName("9-9").active = true;
    } else if (userdata.allfile.buildings.uprunway >= 6 && userdata.allfile.buildings.downrunway >= 6) {
      this.road.getChildByName("6-6").active = true;
    } else if (userdata.allfile.buildings.uprunway >= 3 && userdata.allfile.buildings.downrunway >= 3) {
      this.road.getChildByName("3-3").active = true;
    } else {
      this.road.getChildByName("1-1").active = true;
    }

    this.stand.getChildByName(userdata.allfile.buildings.stand.toString()).active = true;
    this.username.string = userdata.allfile.name;
    this.stars.string = userdata.allfile.stars;
    this.coins.string = userdata.allfile.money;
    this.maxfuel = userdata.allfile.stars + 10;
    this.maxpassenger = userdata.allfile.stars * 2 + 20;
    this.fuel.progress = userdata.lefts.leftfuel / this.maxfuel;
    this.fuelnum.string = userdata.lefts.leftfuel.toString() + "/" + this.maxfuel.toString();
    this.passenger.progress = userdata.lefts.leftpassenger / this.maxpassenger;
    this.passengernum.string = userdata.lefts.leftpassenger.toString() + "/" + this.maxpassenger.toString();

    if (userdata.lefts.leftfuel < this.maxfuel && this.allclock.fuelclock.runstate == false) {
      this.allclock.fuelclock.runstate = true;
      this.fuelclock.active = true;
    }

    if (userdata.lefts.leftpassenger < this.maxpassenger && this.allclock.passengerclock.runstate == false) {
      this.allclock.passengerclock.runstate = true;
      this.passengerclock.active = true;
    }

    for (var o in userdata.allfile.airplane) {}
  },
  startclock: function startclock() {
    this.callback = function () {
      cc.sys.localStorage.setItem("time", Date.parse(new Date()));

      if (this.allclock.fuelclock.runstate == true) {
        this.allclock.fuelclock.timenumber += 1;

        if (this.allclock.fuelclock.timenumber == 60) {
          this.allclock.fuelclock.timenumber = 0;
          userdata.lefts.leftfuel += 1;
        }

        if (this.allclock.fuelclock.timenumber < 10) {
          this.fuelclocknumber.string = "0" + this.allclock.fuelclock.timenumber.toString();
        } else {
          this.fuelclocknumber.string = this.allclock.fuelclock.timenumber.toString();
        }

        if (userdata.lefts.leftfuel >= this.maxfuel) {
          this.allclock.fuelclock.runstate = false;
          this.allclock.fuelclock.timenumber = 0;
          this.fuelclock.active = false;
        }
      }

      if (this.allclock.passengerclock.runstate == true) {
        this.allclock.passengerclock.timenumber += 1;

        if (this.allclock.passengerclock.timenumber == 60) {
          this.allclock.passengerclock.timenumber = 0;
          userdata.lefts.leftpassenger += 1;
        }

        if (this.allclock.passengerclock.timenumber < 10) {
          this.passengerclocknumber.string = "0" + this.allclock.passengerclock.timenumber.toString();
        } else {
          this.passengerclocknumber.string = this.allclock.passengerclock.timenumber.toString();
        }

        if (userdata.lefts.leftpassenger >= this.maxpassenger) {
          this.allclock.passengerclock.runstate = false;
          this.allclock.passengerclock.timenumber = 0;
          this.passengerclock.active = false;
        }
      }

      if (this.time == 60) {
        this.uploadUserData();
        cc.sys.localStorage.setItem("lefts", JSON.stringify(userdata.lefts));
        cc.sys.localStorage.setItem("stars", userdata.allfile.stars);
        this.time == 0;
      } else {
        this.time += 1;
      }
    };

    this.schedule(function () {
      this.callback();
    }, 1);
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9zY3JpcHQvcnVud2F5X3NjZW5lLmpzIl0sIm5hbWVzIjpbInVzZXJkYXRhIiwicmVxdWlyZSIsImNjIiwiQ2xhc3MiLCJDb21wb25lbnQiLCJwcm9wZXJ0aWVzIiwidXNlcmlkIiwiSW50ZWdlciIsInJ1bndheSIsInR5cGUiLCJOb2RlIiwicm9hZCIsInN0YW5kIiwidXNlcm5hbWUiLCJMYWJlbCIsInN0YXJzIiwiZnVlbCIsIlByb2dyZXNzQmFyIiwiZnVlbG51bSIsImZ1ZWxjbG9jayIsImZ1ZWxjbG9ja251bWJlciIsInBhc3NlbmdlciIsInBhc3Nlbmdlcm51bSIsInBhc3NlbmdlcmNsb2NrIiwicGFzc2VuZ2VyY2xvY2tudW1iZXIiLCJjb2lucyIsIm1heGZ1ZWwiLCJtYXhwYXNzZW5nZXIiLCJhbGxjbG9jayIsIk9iamVjdCIsInRpbWUiLCJvbkxvYWQiLCJub2RlIiwib3BhY2l0eSIsInN5cyIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJydW5zdGF0ZSIsInRpbWVudW1iZXIiLCJsZWZ0cyIsImxlZnRmdWVsIiwibGVmdHBhc3NlbmdlciIsIm5ld3VzZXIiLCJiYWNrdG9nYW1lIiwic3RhcnQiLCJydW5BY3Rpb24iLCJmYWRlSW4iLCJzdGFydGNsb2NrIiwidXBkYXRlIiwiZHQiLCJzaG93bWFwIiwiZGlyZWN0b3IiLCJsb2FkU2NlbmUiLCJkb3dubG9hZFVzZXJEYXRhIiwieGhyIiwiWE1MSHR0cFJlcXVlc3QiLCJvcGVuIiwic2V0UmVxdWVzdEhlYWRlciIsInNlbmQiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJyZWFkeVN0YXRlIiwic3RhdHVzIiwicmVzcG9uc2VUZXh0Iiwic2V0SXRlbSIsImFsbGZpbGUiLCJKU09OIiwicGFyc2UiLCJ1cGxvYWRVc2VyRGF0YSIsInN0cmluZ2lmeSIsImNvbnNvbGUiLCJsb2ciLCJsZWF2ZXRpbWUiLCJEYXRlIiwibGVmdCIsImFkZCIsIk1hdGgiLCJmbG9vciIsImdldENoaWxkQnlOYW1lIiwiYnVpbGRpbmdzIiwidXBydW53YXkiLCJ0b1N0cmluZyIsImFjdGl2ZSIsImRvd25ydW53YXkiLCJzdHJpbmciLCJuYW1lIiwibW9uZXkiLCJwcm9ncmVzcyIsIm8iLCJhaXJwbGFuZSIsImNhbGxiYWNrIiwic2NoZWR1bGUiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUEsSUFBSUEsUUFBUSxHQUFHQyxPQUFPLENBQUMsVUFBRCxDQUF0Qjs7QUFFQUMsRUFBRSxDQUFDQyxLQUFILENBQVM7QUFDTCxhQUFTRCxFQUFFLENBQUNFLFNBRFA7QUFHTEMsRUFBQUEsVUFBVSxFQUFFO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0FDLElBQUFBLE1BQU0sRUFBQ0osRUFBRSxDQUFDSyxPQWhCRjtBQWlCUkMsSUFBQUEsTUFBTSxFQUFDO0FBQ0hDLE1BQUFBLElBQUksRUFBQ1AsRUFBRSxDQUFDUSxJQURMO0FBRUgsaUJBQVE7QUFGTCxLQWpCQztBQXFCUkMsSUFBQUEsSUFBSSxFQUFDO0FBQ0RGLE1BQUFBLElBQUksRUFBQ1AsRUFBRSxDQUFDUSxJQURQO0FBRUQsaUJBQVE7QUFGUCxLQXJCRztBQXlCUkUsSUFBQUEsS0FBSyxFQUFDO0FBQ0ZILE1BQUFBLElBQUksRUFBQ1AsRUFBRSxDQUFDUSxJQUROO0FBRUYsaUJBQVE7QUFGTixLQXpCRTtBQTZCUkcsSUFBQUEsUUFBUSxFQUFDO0FBQ0xKLE1BQUFBLElBQUksRUFBQ1AsRUFBRSxDQUFDWSxLQURIO0FBRUwsaUJBQVE7QUFGSCxLQTdCRDtBQWlDUkMsSUFBQUEsS0FBSyxFQUFDO0FBQ0ZOLE1BQUFBLElBQUksRUFBQ1AsRUFBRSxDQUFDWSxLQUROO0FBRUYsaUJBQVE7QUFGTixLQWpDRTtBQXFDUkUsSUFBQUEsSUFBSSxFQUFDO0FBQ0RQLE1BQUFBLElBQUksRUFBQ1AsRUFBRSxDQUFD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b3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsiLy8gTGVhcm4gY2MuQ2xhc3M6XG4vLyAgLSBodHRwczovL2RvY3MuY29jb3MuY29tL2NyZWF0b3IvbWFudWFsL2VuL3NjcmlwdGluZy9jbGFzcy5odG1sXG4vLyBMZWFybiBBdHRyaWJ1dGU6XG4vLyAgLSBodHRwczovL2RvY3MuY29jb3MuY29tL2NyZWF0b3IvbWFudWFsL2VuL3NjcmlwdGluZy9yZWZlcmVuY2UvYXR0cmlidXRlcy5odG1sXG4vLyBMZWFybiBsaWZlLWN5Y2xlIGNhbGxiYWNrczpcbi8vICAtIGh0dHBzOi8vZG9jcy5jb2Nvcy5jb20vY3JlYXRvci9tYW51YWwvZW4vc2NyaXB0aW5nL2xpZmUtY3ljbGUtY2FsbGJhY2tzLmh0bWxcblxudmFyIHVzZXJkYXRhID0gcmVxdWlyZSgndXNlcmRhdGEnKTtcblxuY2MuQ2xhc3Moe1xuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcblxuICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgLy8gZm9vOiB7XG4gICAgICAgIC8vICAgICAvLyBBVFRSSUJVVEVTOlxuICAgICAgICAvLyAgICAgZGVmYXVsdDogbnVsbCwgICAgICAgIC8vIFRoZSBkZWZhdWx0IHZhbHVlIHdpbGwgYmUgdXNlZCBvbmx5IHdoZW4gdGhlIGNvbXBvbmVudCBhdHRhY2hpbmdcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0byBhIG5vZGUgZm9yIHRoZSBmaXJzdCB0aW1lXG4gICAgICAgIC8vICAgICB0eXBlOiBjYy5TcHJpdGVGcmFtZSwgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHlwZW9mIGRlZmF1bHRcbiAgICAgICAgLy8gICAgIHNlcmlhbGl6YWJsZTogdHJ1ZSwgICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0cnVlXG4gICAgICAgIC8vIH0sXG4gICAgICAgIC8vIGJhcjoge1xuICAgICAgICAvLyAgICAgZ2V0ICgpIHtcbiAgICAgICAgLy8gICAgICAgICByZXR1cm4gdGhpcy5fYmFyO1xuICAgICAgICAvLyAgICAgfSxcbiAgICAgICAgLy8gICAgIHNldCAodmFsdWUpIHtcbiAgICAgICAgLy8gICAgICAgICB0aGlzLl9iYXIgPSB2YWx1ZTtcbiAgICAgICAgLy8gICAgIH1cbiAgICAgICAgLy8gfSxcbiAgICAgICAgdXNlcmlkOmNjLkludGVnZXIsXG4gICAgICAgIHJ1bndheTp7XG4gICAgICAgICAgICB0eXBlOmNjLk5vZGUsXG4gICAgICAgICAgICBkZWZhdWx0Om51bGxcbiAgICAgICAgfSxcbiAgICAgICAgcm9hZDp7XG4gICAgICAgICAgICB0eXBlOmNjLk5vZGUsXG4gICAgICAgICAgICBkZWZhdWx0Om51bGxcbiAgICAgICAgfSxcbiAgICAgICAgc3RhbmQ6e1xuICAgICAgICAgICAgdHlwZTpjYy5Ob2RlLFxuICAgICAgICAgICAgZGVmYXVsdDpudWxsXG4gICAgICAgIH0sXG4gICAgICAgIHVzZXJuYW1lOntcbiAgICAgICAgICAgIHR5cGU6Y2MuTGFiZWwsXG4gICAgICAgICAgICBkZWZhdWx0Om51bGxcbiAgICAgICAgfSxcbiAgICAgICAgc3RhcnM6e1xuICAgICAgICAgICAgdHlwZTpjYy5MYWJlbCxcbiAgICAgICAgICAgIGRlZmF1bHQ6bnVsbFxuICAgICAgICB9LFxuICAgICAgICBmdWVsOntcbiAgICAgICAgICAgIHR5cGU6Y2MuUHJvZ3Jlc3NCYXIsXG4gICAgICAgICAgICBkZWZhdWx0Om51bGxcbiAgICAgICAgfSxcbiAgICAgICAgZnVlbG51bTp7XG4gICAgICAgICAgICB0eXBlOmNjLkxhYmVsLFxuICAgICAgICAgICAgZGVmYXVsdDpudWxsXG4gICAgICAgIH0sXG4gICAgICAgIGZ1ZWxjbG9jazp7XG4gICAgICAgICAgICB0eXBlOmNjLk5vZGUsXG4gICAgICAgICAgICBkZWZhdWx0Om51bGxcbiAgICAgICAgfSxcbiAgICAgICAgZnVlbGNsb2NrbnVtYmVyOntcbiAgICAgICAgICAgIHR5cGU6Y2MuTGFiZWwsXG4gICAgICAgICAgICBkZWZhdWx0Om51bGxcbiAgICAgICAgfSxcbiAgICAgICAgcGFzc2VuZ2VyOntcbiAgICAgICAgICAgIHR5cGU6Y2MuUHJvZ3Jlc3NCYXIsXG4gICAgICAgICAgICBkZWZhdWx0Om51bGxcbiAgICAgICAgfSxcbiAgICAgICAgcGFzc2VuZ2VybnVtOntcbiAgICAgICAgICAgIHR5cGU6Y2MuTGFiZWwsXG4gICAgICAgICAgICBkZWZhdWx0Om51bGxcbiAgICAgICAgfSxcbiAgICAgICAgcGFzc2VuZ2VyY2xvY2s6e1xuICAgICAgICAgICAgdHlwZTpjYy5Ob2RlLFxuICAgICAgICAgICAgZGVmYXVsdDpudWxsXG4gICAgICAgIH0sXG4gICAgICAgIHBhc3NlbmdlcmNsb2NrbnVtYmVyOntcbiAgICAgICAgICAgIHR5cGU6Y2MuTGFiZWwsXG4gICAgICAgICAgICBkZWZhdWx0Om51bGxcbiAgICAgICAgfSxcbiAgICAgICAgY29pbnM6e1xuICAgICAgICAgICAgdHlwZTpjYy5MYWJlbCxcbiAgICAgICAgICAgIGRlZmF1bHQ6bnVsbFxuICAgICAgICB9LFxuICAgICAgICBtYXhmdWVsOmNjLkludGVnZXIsXG4gICAgICAgIG1heHBhc3NlbmdlcjpjYy5JbnRlZ2VyLFxuICAgICAgICBhbGxjbG9jazpPYmplY3QsXG4gICAgICAgIHRpbWU6Y2MuSW50ZWdlclxuICAgIH0sXG5cbiAgICAvLyBMSUZFLUNZQ0xFIENBTExCQUNLUzpcblxuICAgIG9uTG9hZCAoKSB7XG4gICAgICAgIHRoaXMubm9kZS5vcGFjaXR5ID0gMDtcbiAgICAgICAgdGhpcy51c2VyaWQgPSBjYy5zeXMubG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJpZFwiKTtcbiAgICAgICAgdGhpcy5hbGxjbG9jayA9IHtcbiAgICAgICAgICAgIGZ1ZWxjbG9jayA6IHtcbiAgICAgICAgICAgICAgICBydW5zdGF0ZTpmYWxzZSxcbiAgICAgICAgICAgICAgICB0aW1lbnVtYmVyOjBcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwYXNzZW5nZXJjbG9jayA6IHtcbiAgICAgICAgICAgICAgICBydW5zdGF0ZTpmYWxzZSxcbiAgICAgICAgICAgICAgICB0aW1lbnVtYmVyOjBcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgdXNlcmRhdGEubGVmdHMgPSB7XG4gICAgICAgICAgICBsZWZ0ZnVlbDowLFxuICAgICAgICAgICAgbGVmdHBhc3NlbmdlcjowXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5uZXd1c2VyKCk7XG4gICAgICAgIHRoaXMuYmFja3RvZ2FtZShjYy5zeXMubG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJzdGFyc1wiKSk7XG4gICAgfSxcblxuICAgIHN0YXJ0ICgpIHtcbiAgICAgICAgdGhpcy5ub2RlLnJ1bkFjdGlvbihjYy5mYWRlSW4oMS4wKSk7XG4gICAgICAgIHRoaXMuc3RhcnRjbG9jaygpO1xuICAgICAgICB0aGlzLmJhY2t0b2dhbWUoY2Muc3lzLmxvY2FsU3RvcmFnZS5nZXRJdGVtKFwic3RhcnNcIikpO1xuICAgIH0sXG5cbiAgICB1cGRhdGUgKGR0KSB7XG4gICAgICAgIHRoaXMuc2hvd21hcCgpO1xuICAgIH0sXG5cbiAgICBuZXd1c2VyOmZ1bmN0aW9uKCl7XG4gICAgICAgIGlmKHRoaXMudXNlcmlkPT1udWxsKXtcbiAgICAgICAgICAgIGNjLmRpcmVjdG9yLmxvYWRTY2VuZShcImhvbWVwYWdlX3NjZW5lXCIpO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIHRoaXMuZG93bmxvYWRVc2VyRGF0YSgpO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIGRvd25sb2FkVXNlckRhdGE6ZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgICB4aHIub3BlbihcIlBPU1RcIiwgXCJodHRwczovLzE0MC4xNDMuMTI2LjczL2FtYXppbmdfYWlycG9ydC9hbWF6aW5nX2FpcnBvcnQucGhwP21vZHVsZT0xXCIsIHRydWUpO1xuICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtdHlwZVwiLFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCIpO1xuICAgICAgICB4aHIuc2VuZChcImlkPVwiICsgdGhpcy51c2VyaWQpO1xuICAgICAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHhoci5yZWFkeVN0YXRlID09IDQgJiYgKHhoci5zdGF0dXMgPj0gMjAwICYmIHhoci5zdGF0dXMgPCA0MDApKSB7XG4gICAgICAgICAgICAgICAgaWYgKHhoci5yZXNwb25zZVRleHQgIT0gMCl7XG4gICAgICAgICAgICAgICAgICAgIGNjLnN5cy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndXNlckRhdGEnLHhoci5yZXNwb25zZVRleHQpO1xuICAgICAgICAgICAgICAgICAgICB1c2VyZGF0YS5hbGxmaWxlID0gSlNPTi5wYXJzZSh4aHIucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgdXBsb2FkVXNlckRhdGE6ZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgICB4aHIub3BlbihcIlBPU1RcIiwgXCJodHRwczovLzE0MC4xNDMuMTI2LjczL2FtYXppbmdfYWlycG9ydC9hbWF6aW5nX2FpcnBvcnQucGhwP21vZHVsZT0yXCIsIHRydWUpO1xuICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtdHlwZVwiLFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCIpO1xuICAgICAgICB4aHIuc2VuZChcImlkPVwiICsgdGhpcy51c2VyaWQgKyBcIiZ1c2VyRGF0YT1cIiArIEpTT04uc3RyaW5naWZ5KHVzZXJkYXRhLmFsbGZpbGUpKTtcbiAgICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh4aHIucmVhZHlTdGF0ZSA9PSA0ICYmICh4aHIuc3RhdHVzID49IDIwMCAmJiB4aHIuc3RhdHVzIDwgNDAwKSkge1xuICAgICAgICAgICAgICAgIGlmKHhoci5yZXNwb25zZVRleHQgPT0gMSl7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBiYWNrdG9nYW1lOmZ1bmN0aW9uKHN0YXJzKXtcbiAgICAgICAgdmFyIG1heGZ1ZWwgPSBzdGFycyArIDEwO1xuICAgICAgICB2YXIgbWF4cGFzc2VuZ2VyID0gc3RhcnMgKiAyICsgMjA7XG4gICAgICAgIHZhciBsZWF2ZXRpbWUgPSAoRGF0ZS5wYXJzZShuZXcgRGF0ZSgpKSAtIGNjLnN5cy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInRpbWVcIikpLzEwMDA7XG4gICAgICAgIGNvbnNvbGUubG9nKGxlYXZldGltZSk7XG4gICAgICAgIHZhciBsZWZ0ID0gSlNPTi5wYXJzZShjYy5zeXMubG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJsZWZ0c1wiKSk7XG4gICAgICAgIGNvbnNvbGUubG9nKGxlZnQpO1xuICAgICAgICBpZihsZWZ0LmxlZnRmdWVsID49IG1heGZ1ZWwpe1xuICAgICAgICAgICAgdXNlcmRhdGEubGVmdHMubGVmdGZ1ZWwgPSBsZWZ0LmxlZnRmdWVsO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIHZhciBhZGQgPSBNYXRoLmZsb29yKGxlYXZldGltZS82MCkgKyBsZWZ0LmxlZnRmdWVsO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZihhZGQgPj0gbWF4ZnVlbCl7XG4gICAgICAgICAgICAgICAgdXNlcmRhdGEubGVmdHMubGVmdGZ1ZWwgPSBtYXhmdWVsO1xuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgdXNlcmRhdGEubGVmdHMubGVmdGZ1ZWwgPSBhZGQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYobGVmdC5sZWZ0cGFzc2VuZ2VyID49IG1heHBhc3Nlbmdlcil7XG4gICAgICAgICAgICB1c2VyZGF0YS5sZWZ0cy5sZWZ0cGFzc2VuZ2VyID0gbGVmdC5sZWZ0cGFzc2VuZ2VyO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIHZhciBhZGQgPSBNYXRoLmZsb29yKGxlYXZldGltZS82MCkgKyBsZWZ0LmxlZnRwYXNzZW5nZXI7XG4gICAgICAgICAgICBpZihhZGQgPj0gbWF4cGFzc2VuZ2VyKXtcbiAgICAgICAgICAgICAgICB1c2VyZGF0YS5sZWZ0cy5sZWZ0cGFzc2VuZ2VyID0gbWF4cGFzc2VuZ2VyO1xuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgdXNlcmRhdGEubGVmdHMubGVmdHBhc3NlbmdlciA9IGFkZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBzaG93bWFwOmZ1bmN0aW9uKCl7XG4gICAgICAgIHRoaXMucnVud2F5LmdldENoaWxkQnlOYW1lKFwidXBcIikuZ2V0Q2hpbGRCeU5hbWUodXNlcmRhdGEuYWxsZmlsZS5idWlsZGluZ3MudXBydW53YXkudG9TdHJpbmcoKSkuYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5ydW53YXkuZ2V0Q2hpbGRCeU5hbWUoXCJkb3duXCIpLmdldENoaWxkQnlOYW1lKHVzZXJkYXRhLmFsbGZpbGUuYnVpbGRpbmdzLmRvd25ydW53YXkudG9TdHJpbmcoKSkuYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgaWYodXNlcmRhdGEuYWxsZmlsZS5idWlsZGluZ3MudXBydW53YXk+PTkmJnVzZXJkYXRhLmFsbGZpbGUuYnVpbGRpbmdzLmRvd25ydW53YXk+PTkpe1xuICAgICAgICAgICAgdGhpcy5yb2FkLmdldENoaWxkQnlOYW1lKFwiOS05XCIpLmFjdGl2ZSA9IHRydWU7XG4gICAgICAgIH1lbHNlIGlmKHVzZXJkYXRhLmFsbGZpbGUuYnVpbGRpbmdzLnVwcnVud2F5Pj02JiZ1c2VyZGF0YS5hbGxmaWxlLmJ1aWxkaW5ncy5kb3ducnVud2F5Pj02KXtcbiAgICAgICAgICAgIHRoaXMucm9hZC5nZXRDaGlsZEJ5TmFtZShcIjYtNlwiKS5hY3RpdmUgPSB0cnVlO1xuICAgICAgICB9ZWxzZSBpZih1c2VyZGF0YS5hbGxmaWxlLmJ1aWxkaW5ncy51cHJ1bndheT49MyYmdXNlcmRhdGEuYWxsZmlsZS5idWlsZGluZ3MuZG93bnJ1bndheT49Myl7XG4gICAgICAgICAgICB0aGlzLnJvYWQuZ2V0Q2hpbGRCeU5hbWUoXCIzLTNcIikuYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICB0aGlzLnJvYWQuZ2V0Q2hpbGRCeU5hbWUoXCIxLTFcIikuYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN0YW5kLmdldENoaWxkQnlOYW1lKHVzZXJkYXRhLmFsbGZpbGUuYnVpbGRpbmdzLnN0YW5kLnRvU3RyaW5nKCkpLmFjdGl2ZSA9IHRydWU7XG4gICAgICAgIHRoaXMudXNlcm5hbWUuc3RyaW5nID0gdXNlcmRhdGEuYWxsZmlsZS5uYW1lO1xuICAgICAgICB0aGlzLnN0YXJzLnN0cmluZyA9IHVzZXJkYXRhLmFsbGZpbGUuc3RhcnM7XG4gICAgICAgIHRoaXMuY29pbnMuc3RyaW5nID0gdXNlcmRhdGEuYWxsZmlsZS5tb25leTtcbiAgICAgICAgdGhpcy5tYXhmdWVsID0gdXNlcmRhdGEuYWxsZmlsZS5zdGFycyArIDEwO1xuICAgICAgICB0aGlzLm1heHBhc3NlbmdlciA9IHVzZXJkYXRhLmFsbGZpbGUuc3RhcnMgKiAyICsgMjA7XG4gICAgICAgIHRoaXMuZnVlbC5wcm9ncmVzcyA9IHVzZXJkYXRhLmxlZnRzLmxlZnRmdWVsIC8gdGhpcy5tYXhmdWVsO1xuICAgICAgICB0aGlzLmZ1ZWxudW0uc3RyaW5nID0gdXNlcmRhdGEubGVmdHMubGVmdGZ1ZWwudG9TdHJpbmcoKSArIFwiL1wiICsgdGhpcy5tYXhmdWVsLnRvU3RyaW5nKCk7XG4gICAgICAgIHRoaXMucGFzc2VuZ2VyLnByb2dyZXNzID0gdXNlcmRhdGEubGVmdHMubGVmdHBhc3NlbmdlciAvIHRoaXMubWF4cGFzc2VuZ2VyO1xuICAgICAgICB0aGlzLnBhc3Nlbmdlcm51bS5zdHJpbmcgPSB1c2VyZGF0YS5sZWZ0cy5sZWZ0cGFzc2VuZ2VyLnRvU3RyaW5nKCkgKyBcIi9cIiArIHRoaXMubWF4cGFzc2VuZ2VyLnRvU3RyaW5nKCk7XG4gICAgICAgIGlmICh1c2VyZGF0YS5sZWZ0cy5sZWZ0ZnVlbCA8IHRoaXMubWF4ZnVlbCAmJiB0aGlzLmFsbGNsb2NrLmZ1ZWxjbG9jay5ydW5zdGF0ZSA9PSBmYWxzZSl7XG4gICAgICAgICAgICB0aGlzLmFsbGNsb2NrLmZ1ZWxjbG9jay5ydW5zdGF0ZSA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmZ1ZWxjbG9jay5hY3RpdmUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh1c2VyZGF0YS5sZWZ0cy5sZWZ0cGFzc2VuZ2VyIDwgdGhpcy5tYXhwYXNzZW5nZXIgJiYgdGhpcy5hbGxjbG9jay5wYXNzZW5nZXJjbG9jay5ydW5zdGF0ZSA9PSBmYWxzZSl7XG4gICAgICAgICAgICB0aGlzLmFsbGNsb2NrLnBhc3NlbmdlcmNsb2NrLnJ1bnN0YXRlID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMucGFzc2VuZ2VyY2xvY2suYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBmb3IodmFyIG8gaW4gdXNlcmRhdGEuYWxsZmlsZS5haXJwbGFuZSl7XG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBzdGFydGNsb2NrOmZ1bmN0aW9uKCl7XG4gICAgICAgIHRoaXMuY2FsbGJhY2sgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgY2Muc3lzLmxvY2FsU3RvcmFnZS5zZXRJdGVtKFwidGltZVwiLERhdGUucGFyc2UobmV3IERhdGUoKSkpO1xuICAgICAgICAgICAgaWYodGhpcy5hbGxjbG9jay5mdWVsY2xvY2sucnVuc3RhdGU9PXRydWUpe1xuICAgICAgICAgICAgICAgIHRoaXMuYWxsY2xvY2suZnVlbGNsb2NrLnRpbWVudW1iZXIgKz0gMTtcbiAgICAgICAgICAgICAgICBpZih0aGlzLmFsbGNsb2NrLmZ1ZWxjbG9jay50aW1lbnVtYmVyID09IDYwKXtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hbGxjbG9jay5mdWVsY2xvY2sudGltZW51bWJlciA9IDA7XG4gICAgICAgICAgICAgICAgICAgIHVzZXJkYXRhLmxlZnRzLmxlZnRmdWVsICs9IDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmKHRoaXMuYWxsY2xvY2suZnVlbGNsb2NrLnRpbWVudW1iZXI8MTApe1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZ1ZWxjbG9ja251bWJlci5zdHJpbmcgPSBcIjBcIiArIHRoaXMuYWxsY2xvY2suZnVlbGNsb2NrLnRpbWVudW1iZXIudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mdWVsY2xvY2tudW1iZXIuc3RyaW5nID0gdGhpcy5hbGxjbG9jay5mdWVsY2xvY2sudGltZW51bWJlci50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZih1c2VyZGF0YS5sZWZ0cy5sZWZ0ZnVlbD49dGhpcy5tYXhmdWVsKXtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hbGxjbG9jay5mdWVsY2xvY2sucnVuc3RhdGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hbGxjbG9jay5mdWVsY2xvY2sudGltZW51bWJlciA9IDA7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZnVlbGNsb2NrLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKHRoaXMuYWxsY2xvY2sucGFzc2VuZ2VyY2xvY2sucnVuc3RhdGU9PXRydWUpe1xuICAgICAgICAgICAgICAgIHRoaXMuYWxsY2xvY2sucGFzc2VuZ2VyY2xvY2sudGltZW51bWJlciArPSAxO1xuICAgICAgICAgICAgICAgIGlmKHRoaXMuYWxsY2xvY2sucGFzc2VuZ2VyY2xvY2sudGltZW51bWJlciA9PSA2MCl7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWxsY2xvY2sucGFzc2VuZ2VyY2xvY2sudGltZW51bWJlciA9IDA7XG4gICAgICAgICAgICAgICAgICAgIHVzZXJkYXRhLmxlZnRzLmxlZnRwYXNzZW5nZXIgKz0gMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYodGhpcy5hbGxjbG9jay5wYXNzZW5nZXJjbG9jay50aW1lbnVtYmVyPDEwKXtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXNzZW5nZXJjbG9ja251bWJlci5zdHJpbmcgPSBcIjBcIiArIHRoaXMuYWxsY2xvY2sucGFzc2VuZ2VyY2xvY2sudGltZW51bWJlci50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhc3NlbmdlcmNsb2NrbnVtYmVyLnN0cmluZyA9IHRoaXMuYWxsY2xvY2sucGFzc2VuZ2VyY2xvY2sudGltZW51bWJlci50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZih1c2VyZGF0YS5sZWZ0cy5sZWZ0cGFzc2VuZ2VyPj10aGlzLm1heHBhc3Nlbmdlcil7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWxsY2xvY2sucGFzc2VuZ2VyY2xvY2sucnVuc3RhdGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hbGxjbG9jay5wYXNzZW5nZXJjbG9jay50aW1lbnVtYmVyID0gMDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXNzZW5nZXJjbG9jay5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZih0aGlzLnRpbWUgPT0gNjApe1xuICAgICAgICAgICAgICAgIHRoaXMudXBsb2FkVXNlckRhdGEoKTtcbiAgICAgICAgICAgICAgICBjYy5zeXMubG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJsZWZ0c1wiLEpTT04uc3RyaW5naWZ5KHVzZXJkYXRhLmxlZnRzKSk7XG4gICAgICAgICAgICAgICAgY2Muc3lzLmxvY2FsU3RvcmFnZS5zZXRJdGVtKFwic3RhcnNcIix1c2VyZGF0YS5hbGxmaWxlLnN0YXJzKTtcbiAgICAgICAgICAgICAgICB0aGlzLnRpbWUgPT0gMFxuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgdGhpcy50aW1lICs9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zY2hlZHVsZShmdW5jdGlvbigpe1xuICAgICAgICAgICAgdGhpcy5jYWxsYmFjaygpO1xuICAgICAgICB9LDEpXG4gICAgfSxcbn0pOyJdfQ==