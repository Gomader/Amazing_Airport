
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/script/runway_scene.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '660dfXmAJ1O54O3BLVKKhKx', 'runway_scene');
// script/runway_scene.js

"use strict";

// Learn cc.Class:
//  - https://docs.cocos.com/creator/manual/en/scripting/class.html
// Learn Attribute:
//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html
// Learn life-cycle callbacks:
//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html
cc.Class({
  "extends": cc.Component,
  properties: {
    // foo: {
    //     // ATTRIBUTES:
    //     default: null,        // The default value will be used only when the component attaching
    //                           // to a node for the first time
    //     type: cc.SpriteFrame, // optional, default is typeof default
    //     serializable: true,   // optional, default is true
    // },
    // bar: {
    //     get () {
    //         return this._bar;
    //     },
    //     set (value) {
    //         this._bar = value;
    //     }
    // },
    userid: cc.Integer,
    runway: {
      type: cc.Node,
      "default": null
    },
    road: {
      type: cc.Node,
      "default": null
    },
    stand: {
      type: cc.Node,
      "default": null
    },
    username: {
      type: cc.Label,
      "default": null
    },
    stars: {
      type: cc.Label,
      "default": null
    },
    fuel: {
      type: cc.ProgressBar,
      "default": null
    },
    fuelnum: {
      type: cc.Label,
      "default": null
    },
    fuelclock: {
      type: cc.Node,
      "default": null
    },
    fuelclocknumber: {
      type: cc.Label,
      "default": null
    },
    passenger: {
      type: cc.ProgressBar,
      "default": null
    },
    passengernum: {
      type: cc.Label,
      "default": null
    },
    passengerclock: {
      type: cc.Node,
      "default": null
    },
    passengerclocknumber: {
      type: cc.Label,
      "default": null
    },
    coins: {
      type: cc.Label,
      "default": null
    },
    allfile: Object,
    maxfuel: cc.Integer,
    maxpassenger: cc.Integer,
    allclock: Object,
    lefts: Object
  },
  // LIFE-CYCLE CALLBACKS:
  onLoad: function onLoad() {
    this.node.opacity = 0;
    this.userid = cc.sys.localStorage.getItem("id");
    this.allfile = JSON.parse(cc.sys.localStorage.getItem('userData'));
    this.allclock = {
      fuelclock: {
        runstate: false,
        timenumber: 0
      },
      passengerclock: {
        runstate: false,
        timenumber: 0
      }
    }, this.lefts = {
      leftfuel: 0,
      leftpassenger: 0
    };
    this.newuser();
  },
  start: function start() {
    this.node.runAction(cc.fadeIn(1.0));
    this.startclock();
    this.backtogame();
  },
  update: function update(dt) {
    this.allfile = JSON.parse(cc.sys.localStorage.getItem('userData'));
    cc.sys.localStorage.setItem("lefts", JSON.stringify(this.lefts));
    this.showmap();
  },
  newuser: function newuser() {
    if (this.userid == null) {
      cc.director.loadScene("homepage_scene");
    } else {
      this.downloadUserData();
    }
  },
  downloadUserData: function downloadUserData() {
    var xhr = new XMLHttpRequest();
    xhr.open("POST", "https://140.143.126.73/amazing_airport/amazing_airport.php?module=1", true);
    xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    xhr.send("id=" + this.userid);

    xhr.onreadystatechange = function () {
      if (xhr.readyState == 4 && xhr.status >= 200 && xhr.status < 400) {
        if (xhr.responseText != 0) {
          cc.sys.localStorage.setItem('userData', this.responseText);
        }
      }
    };
  },
  uploadUserData: function uploadUserData() {
    var xhr = new XMLHttpRequest();
    xhr.open("POST", "https://140.143.126.73/amazing_airport/amazing_airport.php?module=2", true);
    xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    xhr.send("id=" + this.userid + "&userData=" + JSON.stringify(this.allfile));

    xhr.onreadystatechange = function () {
      if (xhr.readyState == 4 && xhr.status >= 200 && xhr.status < 400) {
        if (xhr.responseText == 1) {
          console.log(1);
        }
      }
    };
  },
  backtogame: function backtogame() {
    this.maxfuel = this.allfile.stars + 10;
    this.maxpassenger = this.allfile.stars * 2 + 20;
    var leavetime = (Date.parse(new Date()) - cc.sys.localStorage.getItem("time")) / 1000;
    var left = JSON.parse(cc.sys.localStorage.getItem("lefts"));

    if (left.leftfuel >= this.maxfuel) {
      this.lefts.leftfuel = left.leftfuel;
    } else {
      var add = Math.floor(leavetime / 60) + left.leftfuel;

      if (add >= this.maxfuel) {
        this.lefts.leftfuel = this.maxfuel;
      } else {
        this.lefts.leftfuel = add;
      }
    }

    if (left.leftpassenger >= this.maxpassenger) {
      this.lefts.leftpassenger = left.leftpassenger;
    } else {
      var add = Math.floor(leavetime / 60) + left.leftpassenger;

      if (add >= this.maxpassenger) {
        this.lefts.leftpassenger = this.maxpassenger;
      } else {
        this.lefts.leftpassenger = add;
      }
    }
  },
  showmap: function showmap() {
    this.runway.getChildByName("up").getChildByName(this.allfile.buildings.uprunway.toString()).active = true;
    this.runway.getChildByName("down").getChildByName(this.allfile.buildings.downrunway.toString()).active = true;

    if (this.allfile.buildings.uprunway >= 9 && this.allfile.buildings.downrunway >= 9) {
      this.road.getChildByName("9-9").active = true;
    } else if (this.allfile.buildings.uprunway >= 6 && this.allfile.buildings.downrunway >= 6) {
      this.road.getChildByName("6-6").active = true;
    } else if (this.allfile.buildings.uprunway >= 3 && this.allfile.buildings.downrunway >= 3) {
      this.road.getChildByName("3-3").active = true;
    } else {
      this.road.getChildByName("1-1").active = true;
    }

    this.stand.getChildByName(this.allfile.buildings.stand.toString()).active = true;
    this.username.string = this.allfile.name;
    this.stars.string = this.allfile.stars;
    this.coins.string = this.allfile.money;
    this.maxfuel = this.allfile.stars + 10;
    this.maxpassenger = this.allfile.stars * 2 + 20;
    this.fuel.progress = this.lefts.leftfuel / this.maxfuel;
    this.fuelnum.string = this.lefts.leftfuel.toString() + "/" + this.maxfuel.toString();
    this.passenger.progress = this.lefts.leftpassenger / this.maxpassenger;
    this.passengernum.string = this.lefts.leftpassenger.toString() + "/" + this.maxpassenger.toString();

    if (this.lefts.leftfuel < this.maxfuel && this.allclock.fuelclock.runstate == false) {
      this.allclock.fuelclock.runstate = true;
      this.fuelclock.active = true;
    }

    if (this.lefts.leftpassenger < this.maxpassenger && this.allclock.passengerclock.runstate == false) {
      this.allclock.passengerclock.runstate = true;
      this.passengerclock.active = true;
    }
  },
  startclock: function startclock() {
    this.callback = function () {
      cc.sys.localStorage.setItem("time", Date.parse(new Date()));

      if (this.allclock.fuelclock.runstate == true) {
        this.allclock.fuelclock.timenumber += 1;

        if (this.allclock.fuelclock.timenumber == 60) {
          this.allclock.fuelclock.timenumber = 0;
          this.lefts.leftfuel += 1;
        }

        if (this.allclock.fuelclock.timenumber < 10) {
          this.fuelclocknumber.string = "0" + this.allclock.fuelclock.timenumber.toString();
        } else {
          this.fuelclocknumber.string = this.allclock.fuelclock.timenumber.toString();
        }

        if (this.lefts.leftfuel >= this.maxfuel) {
          this.allclock.fuelclock.runstate = false;
          this.allclock.fuelclock.timenumber = 0;
          this.fuelclock.active = false;
        }
      }

      if (this.allclock.passengerclock.runstate == true) {
        this.allclock.passengerclock.timenumber += 1;

        if (this.allclock.passengerclock.timenumber == 60) {
          this.allclock.passengerclock.timenumber = 0;
          this.lefts.leftpassenger += 1;
        }

        if (this.allclock.passengerclock.timenumber < 10) {
          this.passengerclocknumber.string = "0" + this.allclock.passengerclock.timenumber.toString();
        } else {
          this.passengerclocknumber.string = this.allclock.passengerclock.timenumber.toString();
        }

        if (this.lefts.leftpassenger >= this.maxpassenger) {
          this.allclock.passengerclock.runstate = false;
          this.allclock.passengerclock.timenumber = 0;
          this.passengerclock.active = false;
        }
      }
    };

    this.schedule(function () {
      this.callback();
    }, 1);
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9zY3JpcHQvcnVud2F5X3NjZW5lLmpzIl0sIm5hbWVzIjpbImNjIiwiQ2xhc3MiLCJDb21wb25lbnQiLCJwcm9wZXJ0aWVzIiwidXNlcmlkIiwiSW50ZWdlciIsInJ1bndheSIsInR5cGUiLCJOb2RlIiwicm9hZCIsInN0YW5kIiwidXNlcm5hbWUiLCJMYWJlbCIsInN0YXJzIiwiZnVlbCIsIlByb2dyZXNzQmFyIiwiZnVlbG51bSIsImZ1ZWxjbG9jayIsImZ1ZWxjbG9ja251bWJlciIsInBhc3NlbmdlciIsInBhc3Nlbmdlcm51bSIsInBhc3NlbmdlcmNsb2NrIiwicGFzc2VuZ2VyY2xvY2tudW1iZXIiLCJjb2lucyIsImFsbGZpbGUiLCJPYmplY3QiLCJtYXhmdWVsIiwibWF4cGFzc2VuZ2VyIiwiYWxsY2xvY2siLCJsZWZ0cyIsIm9uTG9hZCIsIm5vZGUiLCJvcGFjaXR5Iiwic3lzIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsIkpTT04iLCJwYXJzZSIsInJ1bnN0YXRlIiwidGltZW51bWJlciIsImxlZnRmdWVsIiwibGVmdHBhc3NlbmdlciIsIm5ld3VzZXIiLCJzdGFydCIsInJ1bkFjdGlvbiIsImZhZGVJbiIsInN0YXJ0Y2xvY2siLCJiYWNrdG9nYW1lIiwidXBkYXRlIiwiZHQiLCJzZXRJdGVtIiwic3RyaW5naWZ5Iiwic2hvd21hcCIsImRpcmVjdG9yIiwibG9hZFNjZW5lIiwiZG93bmxvYWRVc2VyRGF0YSIsInhociIsIlhNTEh0dHBSZXF1ZXN0Iiwib3BlbiIsInNldFJlcXVlc3RIZWFkZXIiLCJzZW5kIiwib25yZWFkeXN0YXRlY2hhbmdlIiwicmVhZHlTdGF0ZSIsInN0YXR1cyIsInJlc3BvbnNlVGV4dCIsInVwbG9hZFVzZXJEYXRhIiwiY29uc29sZSIsImxvZyIsImxlYXZldGltZSIsIkRhdGUiLCJsZWZ0IiwiYWRkIiwiTWF0aCIsImZsb29yIiwiZ2V0Q2hpbGRCeU5hbWUiLCJidWlsZGluZ3MiLCJ1cHJ1bndheSIsInRvU3RyaW5nIiwiYWN0aXZlIiwiZG93bnJ1bndheSIsInN0cmluZyIsIm5hbWUiLCJtb25leSIsInByb2dyZXNzIiwiY2FsbGJhY2siLCJzY2hlZHVsZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQUEsRUFBRSxDQUFDQyxLQUFILENBQVM7QUFDTCxhQUFTRCxFQUFFLENBQUNFLFNBRFA7QUFHTEMsRUFBQUEsVUFBVSxFQUFFO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0FDLElBQUFBLE1BQU0sRUFBQ0osRUFBRSxDQUFDSyxPQWhCRjtBQWlCUkMsSUFBQUEsTUFBTSxFQUFDO0FBQ0hDLE1BQUFBLElBQUksRUFBQ1AsRUFBRSxDQUFDUSxJQURMO0FBRUgsaUJBQVE7QUFGTCxLQWpCQztBQXFCUkMsSUFBQUEsSUFBSSxFQUFDO0FBQ0RGLE1BQUFBLElBQUksRUFBQ1AsRUFBRSxDQUFDUSxJQURQO0FBRUQsaUJBQVE7QUFGUCxLQXJCRztBQXlCUkUsSUFBQUEsS0FBSyxFQUFDO0FBQ0ZILE1BQUFBLElBQUksRUFBQ1AsRUFBRSxDQUFDUSxJQUROO0FBRUYsaUJBQVE7QUFGTixLQXpCRTtBQTZCUkcsSUFBQUEsUUFBUSxFQUFDO0FBQ0xKLE1BQUFBLElBQUksRUFBQ1AsRUFBRSxDQUFDWSxLQURIO0FBRUwsaUJBQVE7QUFGSCxLQTdCRDtBQWlDUkMsSUFBQUEsS0FBSyxFQUFDO0FBQ0ZOLE1BQUFBLElBQUksRUFBQ1AsRUFBRSxDQUFDWSxLQUROO0FBRUYsaUJBQVE7QUFGTixLQWpDRTtBQXFDUkUsSUFBQUEsSUFBSSxFQUFDO0FBQ0RQLE1BQUFBLElBQUksRUFBQ1AsRUFBRSxDQUFDZSxXQURQO0FBRUQsaUJBQVE7QUFGUCxLQXJDRztBQXlDUkMsSUFBQUEsT0FBTyxFQUFDO0FBQ0pULE1BQUFBLElBQUksRUFBQ1AsRUFBRSxDQUFDWSxL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TCxDQUFjUCxjQUFkLENBQTZCa0IsVUFBN0IsR0FBMEMsQ0FBMUM7QUFDQSxlQUFLbEIsY0FBTCxDQUFvQnlELE1BQXBCLEdBQTZCLEtBQTdCO0FBQ0g7QUFDSjtBQUNKLEtBcENEOztBQXFDQSxTQUFLTyxRQUFMLENBQWMsWUFBVTtBQUNwQixXQUFLRCxRQUFMO0FBQ0gsS0FGRCxFQUVFLENBRkY7QUFHSDtBQTlQSSxDQUFUIiwic291cmNlUm9vdCI6Ii8iLCJzb3VyY2VzQ29udGVudCI6WyIvLyBMZWFybiBjYy5DbGFzczpcbi8vICAtIGh0dHBzOi8vZG9jcy5jb2Nvcy5jb20vY3JlYXRvci9tYW51YWwvZW4vc2NyaXB0aW5nL2NsYXNzLmh0bWxcbi8vIExlYXJuIEF0dHJpYnV0ZTpcbi8vICAtIGh0dHBzOi8vZG9jcy5jb2Nvcy5jb20vY3JlYXRvci9tYW51YWwvZW4vc2NyaXB0aW5nL3JlZmVyZW5jZS9hdHRyaWJ1dGVzLmh0bWxcbi8vIExlYXJuIGxpZmUtY3ljbGUgY2FsbGJhY2tzOlxuLy8gIC0gaHR0cHM6Ly9kb2NzLmNvY29zLmNvbS9jcmVhdG9yL21hbnVhbC9lbi9zY3JpcHRpbmcvbGlmZS1jeWNsZS1jYWxsYmFja3MuaHRtbFxuXG5jYy5DbGFzcyh7XG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxuXG4gICAgcHJvcGVydGllczoge1xuICAgICAgICAvLyBmb286IHtcbiAgICAgICAgLy8gICAgIC8vIEFUVFJJQlVURVM6XG4gICAgICAgIC8vICAgICBkZWZhdWx0OiBudWxsLCAgICAgICAgLy8gVGhlIGRlZmF1bHQgdmFsdWUgd2lsbCBiZSB1c2VkIG9ubHkgd2hlbiB0aGUgY29tcG9uZW50IGF0dGFjaGluZ1xuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRvIGEgbm9kZSBmb3IgdGhlIGZpcnN0IHRpbWVcbiAgICAgICAgLy8gICAgIHR5cGU6IGNjLlNwcml0ZUZyYW1lLCAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0eXBlb2YgZGVmYXVsdFxuICAgICAgICAvLyAgICAgc2VyaWFsaXphYmxlOiB0cnVlLCAgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHRydWVcbiAgICAgICAgLy8gfSxcbiAgICAgICAgLy8gYmFyOiB7XG4gICAgICAgIC8vICAgICBnZXQgKCkge1xuICAgICAgICAvLyAgICAgICAgIHJldHVybiB0aGlzLl9iYXI7XG4gICAgICAgIC8vICAgICB9LFxuICAgICAgICAvLyAgICAgc2V0ICh2YWx1ZSkge1xuICAgICAgICAvLyAgICAgICAgIHRoaXMuX2JhciA9IHZhbHVlO1xuICAgICAgICAvLyAgICAgfVxuICAgICAgICAvLyB9LFxuICAgICAgICB1c2VyaWQ6Y2MuSW50ZWdlcixcbiAgICAgICAgcnVud2F5OntcbiAgICAgICAgICAgIHR5cGU6Y2MuTm9kZSxcbiAgICAgICAgICAgIGRlZmF1bHQ6bnVsbFxuICAgICAgICB9LFxuICAgICAgICByb2FkOntcbiAgICAgICAgICAgIHR5cGU6Y2MuTm9kZSxcbiAgICAgICAgICAgIGRlZmF1bHQ6bnVsbFxuICAgICAgICB9LFxuICAgICAgICBzdGFuZDp7XG4gICAgICAgICAgICB0eXBlOmNjLk5vZGUsXG4gICAgICAgICAgICBkZWZhdWx0Om51bGxcbiAgICAgICAgfSxcbiAgICAgICAgdXNlcm5hbWU6e1xuICAgICAgICAgICAgdHlwZTpjYy5MYWJlbCxcbiAgICAgICAgICAgIGRlZmF1bHQ6bnVsbFxuICAgICAgICB9LFxuICAgICAgICBzdGFyczp7XG4gICAgICAgICAgICB0eXBlOmNjLkxhYmVsLFxuICAgICAgICAgICAgZGVmYXVsdDpudWxsXG4gICAgICAgIH0sXG4gICAgICAgIGZ1ZWw6e1xuICAgICAgICAgICAgdHlwZTpjYy5Qcm9ncmVzc0JhcixcbiAgICAgICAgICAgIGRlZmF1bHQ6bnVsbFxuICAgICAgICB9LFxuICAgICAgICBmdWVsbnVtOntcbiAgICAgICAgICAgIHR5cGU6Y2MuTGFiZWwsXG4gICAgICAgICAgICBkZWZhdWx0Om51bGxcbiAgICAgICAgfSxcbiAgICAgICAgZnVlbGNsb2NrOntcbiAgICAgICAgICAgIHR5cGU6Y2MuTm9kZSxcbiAgICAgICAgICAgIGRlZmF1bHQ6bnVsbFxuICAgICAgICB9LFxuICAgICAgICBmdWVsY2xvY2tudW1iZXI6e1xuICAgICAgICAgICAgdHlwZTpjYy5MYWJlbCxcbiAgICAgICAgICAgIGRlZmF1bHQ6bnVsbFxuICAgICAgICB9LFxuICAgICAgICBwYXNzZW5nZXI6e1xuICAgICAgICAgICAgdHlwZTpjYy5Qcm9ncmVzc0JhcixcbiAgICAgICAgICAgIGRlZmF1bHQ6bnVsbFxuICAgICAgICB9LFxuICAgICAgICBwYXNzZW5nZXJudW06e1xuICAgICAgICAgICAgdHlwZTpjYy5MYWJlbCxcbiAgICAgICAgICAgIGRlZmF1bHQ6bnVsbFxuICAgICAgICB9LFxuICAgICAgICBwYXNzZW5nZXJjbG9jazp7XG4gICAgICAgICAgICB0eXBlOmNjLk5vZGUsXG4gICAgICAgICAgICBkZWZhdWx0Om51bGxcbiAgICAgICAgfSxcbiAgICAgICAgcGFzc2VuZ2VyY2xvY2tudW1iZXI6e1xuICAgICAgICAgICAgdHlwZTpjYy5MYWJlbCxcbiAgICAgICAgICAgIGRlZmF1bHQ6bnVsbFxuICAgICAgICB9LFxuICAgICAgICBjb2luczp7XG4gICAgICAgICAgICB0eXBlOmNjLkxhYmVsLFxuICAgICAgICAgICAgZGVmYXVsdDpudWxsXG4gICAgICAgIH0sXG4gICAgICAgIGFsbGZpbGU6T2JqZWN0LFxuICAgICAgICBtYXhmdWVsOmNjLkludGVnZXIsXG4gICAgICAgIG1heHBhc3NlbmdlcjpjYy5JbnRlZ2VyLFxuICAgICAgICBhbGxjbG9jazpPYmplY3QsXG4gICAgICAgIGxlZnRzOk9iamVjdFxuICAgIH0sXG5cbiAgICAvLyBMSUZFLUNZQ0xFIENBTExCQUNLUzpcblxuICAgIG9uTG9hZCAoKSB7XG4gICAgICAgIHRoaXMubm9kZS5vcGFjaXR5ID0gMDtcbiAgICAgICAgdGhpcy51c2VyaWQgPSBjYy5zeXMubG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJpZFwiKTtcbiAgICAgICAgdGhpcy5hbGxmaWxlID0gSlNPTi5wYXJzZShjYy5zeXMubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJEYXRhJykpO1xuICAgICAgICB0aGlzLmFsbGNsb2NrID0ge1xuICAgICAgICAgICAgZnVlbGNsb2NrIDoge1xuICAgICAgICAgICAgICAgIHJ1bnN0YXRlOmZhbHNlLFxuICAgICAgICAgICAgICAgIHRpbWVudW1iZXI6MFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHBhc3NlbmdlcmNsb2NrIDoge1xuICAgICAgICAgICAgICAgIHJ1bnN0YXRlOmZhbHNlLFxuICAgICAgICAgICAgICAgIHRpbWVudW1iZXI6MFxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB0aGlzLmxlZnRzID0ge1xuICAgICAgICAgICAgbGVmdGZ1ZWw6MCxcbiAgICAgICAgICAgIGxlZnRwYXNzZW5nZXI6MFxuICAgICAgICB9XG4gICAgICAgIHRoaXMubmV3dXNlcigpO1xuICAgIH0sXG5cbiAgICBzdGFydCAoKSB7XG4gICAgICAgIHRoaXMubm9kZS5ydW5BY3Rpb24oY2MuZmFkZUluKDEuMCkpO1xuICAgICAgICB0aGlzLnN0YXJ0Y2xvY2soKTtcbiAgICAgICAgdGhpcy5iYWNrdG9nYW1lKCk7XG4gICAgfSxcblxuICAgIHVwZGF0ZSAoZHQpIHtcbiAgICAgICAgdGhpcy5hbGxmaWxlID0gSlNPTi5wYXJzZShjYy5zeXMubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJEYXRhJykpO1xuICAgICAgICBjYy5zeXMubG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJsZWZ0c1wiLEpTT04uc3RyaW5naWZ5KHRoaXMubGVmdHMpKTtcbiAgICAgICAgdGhpcy5zaG93bWFwKCk7XG4gICAgfSxcblxuICAgIG5ld3VzZXI6ZnVuY3Rpb24oKXtcbiAgICAgICAgaWYodGhpcy51c2VyaWQ9PW51bGwpe1xuICAgICAgICAgICAgY2MuZGlyZWN0b3IubG9hZFNjZW5lKFwiaG9tZXBhZ2Vfc2NlbmVcIik7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgdGhpcy5kb3dubG9hZFVzZXJEYXRhKCk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgZG93bmxvYWRVc2VyRGF0YTpmdW5jdGlvbigpe1xuICAgICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgIHhoci5vcGVuKFwiUE9TVFwiLCBcImh0dHBzOi8vMTQwLjE0My4xMjYuNzMvYW1hemluZ19haXJwb3J0L2FtYXppbmdfYWlycG9ydC5waHA/bW9kdWxlPTFcIiwgdHJ1ZSk7XG4gICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC10eXBlXCIsXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIik7XG4gICAgICAgIHhoci5zZW5kKFwiaWQ9XCIgKyB0aGlzLnVzZXJpZCk7XG4gICAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoeGhyLnJlYWR5U3RhdGUgPT0gNCAmJiAoeGhyLnN0YXR1cyA+PSAyMDAgJiYgeGhyLnN0YXR1cyA8IDQwMCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoeGhyLnJlc3BvbnNlVGV4dCAhPSAwKXtcbiAgICAgICAgICAgICAgICAgICAgY2Muc3lzLmxvY2FsU3RvcmFnZS5zZXRJdGVtKCd1c2VyRGF0YScsdGhpcy5yZXNwb25zZVRleHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICB1cGxvYWRVc2VyRGF0YTpmdW5jdGlvbigpe1xuICAgICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgIHhoci5vcGVuKFwiUE9TVFwiLCBcImh0dHBzOi8vMTQwLjE0My4xMjYuNzMvYW1hemluZ19haXJwb3J0L2FtYXppbmdfYWlycG9ydC5waHA/bW9kdWxlPTJcIiwgdHJ1ZSk7XG4gICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC10eXBlXCIsXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIik7XG4gICAgICAgIHhoci5zZW5kKFwiaWQ9XCIgKyB0aGlzLnVzZXJpZCArIFwiJnVzZXJEYXRhPVwiICsgSlNPTi5zdHJpbmdpZnkodGhpcy5hbGxmaWxlKSk7XG4gICAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoeGhyLnJlYWR5U3RhdGUgPT0gNCAmJiAoeGhyLnN0YXR1cyA+PSAyMDAgJiYgeGhyLnN0YXR1cyA8IDQwMCkpIHtcbiAgICAgICAgICAgICAgICBpZih4aHIucmVzcG9uc2VUZXh0ID09IDEpe1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgYmFja3RvZ2FtZTpmdW5jdGlvbigpe1xuICAgICAgICB0aGlzLm1heGZ1ZWwgPSB0aGlzLmFsbGZpbGUuc3RhcnMgKyAxMDtcbiAgICAgICAgdGhpcy5tYXhwYXNzZW5nZXIgPSB0aGlzLmFsbGZpbGUuc3RhcnMgKiAyICsgMjA7XG4gICAgICAgIHZhciBsZWF2ZXRpbWUgPSAoRGF0ZS5wYXJzZShuZXcgRGF0ZSgpKSAtIGNjLnN5cy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInRpbWVcIikpLzEwMDA7XG4gICAgICAgIHZhciBsZWZ0ID0gSlNPTi5wYXJzZShjYy5zeXMubG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJsZWZ0c1wiKSk7XG4gICAgICAgIGlmKGxlZnQubGVmdGZ1ZWwgPj0gdGhpcy5tYXhmdWVsKXtcbiAgICAgICAgICAgIHRoaXMubGVmdHMubGVmdGZ1ZWwgPSBsZWZ0LmxlZnRmdWVsO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIHZhciBhZGQgPSBNYXRoLmZsb29yKGxlYXZldGltZS82MCkgKyBsZWZ0LmxlZnRmdWVsO1xuICAgICAgICAgICAgaWYoYWRkID49IHRoaXMubWF4ZnVlbCl7XG4gICAgICAgICAgICAgICAgdGhpcy5sZWZ0cy5sZWZ0ZnVlbCA9IHRoaXMubWF4ZnVlbDtcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIHRoaXMubGVmdHMubGVmdGZ1ZWwgPSBhZGQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYobGVmdC5sZWZ0cGFzc2VuZ2VyID49IHRoaXMubWF4cGFzc2VuZ2VyKXtcbiAgICAgICAgICAgIHRoaXMubGVmdHMubGVmdHBhc3NlbmdlciA9IGxlZnQubGVmdHBhc3NlbmdlcjtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICB2YXIgYWRkID0gTWF0aC5mbG9vcihsZWF2ZXRpbWUvNjApICsgbGVmdC5sZWZ0cGFzc2VuZ2VyO1xuICAgICAgICAgICAgaWYoYWRkID49IHRoaXMubWF4cGFzc2VuZ2VyKXtcbiAgICAgICAgICAgICAgICB0aGlzLmxlZnRzLmxlZnRwYXNzZW5nZXIgPSB0aGlzLm1heHBhc3NlbmdlcjtcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIHRoaXMubGVmdHMubGVmdHBhc3NlbmdlciA9IGFkZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBzaG93bWFwOmZ1bmN0aW9uKCl7XG4gICAgICAgIHRoaXMucnVud2F5LmdldENoaWxkQnlOYW1lKFwidXBcIikuZ2V0Q2hpbGRCeU5hbWUodGhpcy5hbGxmaWxlLmJ1aWxkaW5ncy51cHJ1bndheS50b1N0cmluZygpKS5hY3RpdmUgPSB0cnVlO1xuICAgICAgICB0aGlzLnJ1bndheS5nZXRDaGlsZEJ5TmFtZShcImRvd25cIikuZ2V0Q2hpbGRCeU5hbWUodGhpcy5hbGxmaWxlLmJ1aWxkaW5ncy5kb3ducnVud2F5LnRvU3RyaW5nKCkpLmFjdGl2ZSA9IHRydWU7XG4gICAgICAgIGlmKHRoaXMuYWxsZmlsZS5idWlsZGluZ3MudXBydW53YXk+PTkmJnRoaXMuYWxsZmlsZS5idWlsZGluZ3MuZG93bnJ1bndheT49OSl7XG4gICAgICAgICAgICB0aGlzLnJvYWQuZ2V0Q2hpbGRCeU5hbWUoXCI5LTlcIikuYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgfWVsc2UgaWYodGhpcy5hbGxmaWxlLmJ1aWxkaW5ncy51cHJ1bndheT49NiYmdGhpcy5hbGxmaWxlLmJ1aWxkaW5ncy5kb3ducnVud2F5Pj02KXtcbiAgICAgICAgICAgIHRoaXMucm9hZC5nZXRDaGlsZEJ5TmFtZShcIjYtNlwiKS5hY3RpdmUgPSB0cnVlO1xuICAgICAgICB9ZWxzZSBpZih0aGlzLmFsbGZpbGUuYnVpbGRpbmdzLnVwcnVud2F5Pj0zJiZ0aGlzLmFsbGZpbGUuYnVpbGRpbmdzLmRvd25ydW53YXk+PTMpe1xuICAgICAgICAgICAgdGhpcy5yb2FkLmdldENoaWxkQnlOYW1lKFwiMy0zXCIpLmFjdGl2ZSA9IHRydWU7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgdGhpcy5yb2FkLmdldENoaWxkQnlOYW1lKFwiMS0xXCIpLmFjdGl2ZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdGFuZC5nZXRDaGlsZEJ5TmFtZSh0aGlzLmFsbGZpbGUuYnVpbGRpbmdzLnN0YW5kLnRvU3RyaW5nKCkpLmFjdGl2ZSA9IHRydWU7XG4gICAgICAgIHRoaXMudXNlcm5hbWUuc3RyaW5nID0gdGhpcy5hbGxmaWxlLm5hbWU7XG4gICAgICAgIHRoaXMuc3RhcnMuc3RyaW5nID0gdGhpcy5hbGxmaWxlLnN0YXJzO1xuICAgICAgICB0aGlzLmNvaW5zLnN0cmluZyA9IHRoaXMuYWxsZmlsZS5tb25leTtcbiAgICAgICAgdGhpcy5tYXhmdWVsID0gdGhpcy5hbGxmaWxlLnN0YXJzICsgMTA7XG4gICAgICAgIHRoaXMubWF4cGFzc2VuZ2VyID0gdGhpcy5hbGxmaWxlLnN0YXJzICogMiArIDIwO1xuICAgICAgICB0aGlzLmZ1ZWwucHJvZ3Jlc3MgPSB0aGlzLmxlZnRzLmxlZnRmdWVsIC8gdGhpcy5tYXhmdWVsO1xuICAgICAgICB0aGlzLmZ1ZWxudW0uc3RyaW5nID0gdGhpcy5sZWZ0cy5sZWZ0ZnVlbC50b1N0cmluZygpICsgXCIvXCIgKyB0aGlzLm1heGZ1ZWwudG9TdHJpbmcoKTtcbiAgICAgICAgdGhpcy5wYXNzZW5nZXIucHJvZ3Jlc3MgPSB0aGlzLmxlZnRzLmxlZnRwYXNzZW5nZXIgLyB0aGlzLm1heHBhc3NlbmdlcjtcbiAgICAgICAgdGhpcy5wYXNzZW5nZXJudW0uc3RyaW5nID0gdGhpcy5sZWZ0cy5sZWZ0cGFzc2VuZ2VyLnRvU3RyaW5nKCkgKyBcIi9cIiArIHRoaXMubWF4cGFzc2VuZ2VyLnRvU3RyaW5nKCk7XG4gICAgICAgIGlmICh0aGlzLmxlZnRzLmxlZnRmdWVsIDwgdGhpcy5tYXhmdWVsICYmIHRoaXMuYWxsY2xvY2suZnVlbGNsb2NrLnJ1bnN0YXRlID09IGZhbHNlKXtcbiAgICAgICAgICAgIHRoaXMuYWxsY2xvY2suZnVlbGNsb2NrLnJ1bnN0YXRlID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuZnVlbGNsb2NrLmFjdGl2ZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMubGVmdHMubGVmdHBhc3NlbmdlciA8IHRoaXMubWF4cGFzc2VuZ2VyICYmIHRoaXMuYWxsY2xvY2sucGFzc2VuZ2VyY2xvY2sucnVuc3RhdGUgPT0gZmFsc2Upe1xuICAgICAgICAgICAgdGhpcy5hbGxjbG9jay5wYXNzZW5nZXJjbG9jay5ydW5zdGF0ZSA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnBhc3NlbmdlcmNsb2NrLmFjdGl2ZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgc3RhcnRjbG9jazpmdW5jdGlvbigpe1xuICAgICAgICB0aGlzLmNhbGxiYWNrID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIGNjLnN5cy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInRpbWVcIixEYXRlLnBhcnNlKG5ldyBEYXRlKCkpKTtcbiAgICAgICAgICAgIGlmKHRoaXMuYWxsY2xvY2suZnVlbGNsb2NrLnJ1bnN0YXRlPT10cnVlKXtcbiAgICAgICAgICAgICAgICB0aGlzLmFsbGNsb2NrLmZ1ZWxjbG9jay50aW1lbnVtYmVyICs9IDE7XG4gICAgICAgICAgICAgICAgaWYodGhpcy5hbGxjbG9jay5mdWVsY2xvY2sudGltZW51bWJlciA9PSA2MCl7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWxsY2xvY2suZnVlbGNsb2NrLnRpbWVudW1iZXIgPSAwO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxlZnRzLmxlZnRmdWVsICs9IDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmKHRoaXMuYWxsY2xvY2suZnVlbGNsb2NrLnRpbWVudW1iZXI8MTApe1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZ1ZWxjbG9ja251bWJlci5zdHJpbmcgPSBcIjBcIiArIHRoaXMuYWxsY2xvY2suZnVlbGNsb2NrLnRpbWVudW1iZXIudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mdWVsY2xvY2tudW1iZXIuc3RyaW5nID0gdGhpcy5hbGxjbG9jay5mdWVsY2xvY2sudGltZW51bWJlci50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZih0aGlzLmxlZnRzLmxlZnRmdWVsPj10aGlzLm1heGZ1ZWwpe1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFsbGNsb2NrLmZ1ZWxjbG9jay5ydW5zdGF0ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFsbGNsb2NrLmZ1ZWxjbG9jay50aW1lbnVtYmVyID0gMDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mdWVsY2xvY2suYWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYodGhpcy5hbGxjbG9jay5wYXNzZW5nZXJjbG9jay5ydW5zdGF0ZT09dHJ1ZSl7XG4gICAgICAgICAgICAgICAgdGhpcy5hbGxjbG9jay5wYXNzZW5nZXJjbG9jay50aW1lbnVtYmVyICs9IDE7XG4gICAgICAgICAgICAgICAgaWYodGhpcy5hbGxjbG9jay5wYXNzZW5nZXJjbG9jay50aW1lbnVtYmVyID09IDYwKXtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hbGxjbG9jay5wYXNzZW5nZXJjbG9jay50aW1lbnVtYmVyID0gMDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sZWZ0cy5sZWZ0cGFzc2VuZ2VyICs9IDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmKHRoaXMuYWxsY2xvY2sucGFzc2VuZ2VyY2xvY2sudGltZW51bWJlcjwxMCl7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFzc2VuZ2VyY2xvY2tudW1iZXIuc3RyaW5nID0gXCIwXCIgKyB0aGlzLmFsbGNsb2NrLnBhc3NlbmdlcmNsb2NrLnRpbWVudW1iZXIudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXNzZW5nZXJjbG9ja251bWJlci5zdHJpbmcgPSB0aGlzLmFsbGNsb2NrLnBhc3NlbmdlcmNsb2NrLnRpbWVudW1iZXIudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYodGhpcy5sZWZ0cy5sZWZ0cGFzc2VuZ2VyPj10aGlzLm1heHBhc3Nlbmdlcil7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWxsY2xvY2sucGFzc2VuZ2VyY2xvY2sucnVuc3RhdGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hbGxjbG9jay5wYXNzZW5nZXJjbG9jay50aW1lbnVtYmVyID0gMDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXNzZW5nZXJjbG9jay5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zY2hlZHVsZShmdW5jdGlvbigpe1xuICAgICAgICAgICAgdGhpcy5jYWxsYmFjaygpO1xuICAgICAgICB9LDEpXG4gICAgfSxcbn0pOyJdfQ==