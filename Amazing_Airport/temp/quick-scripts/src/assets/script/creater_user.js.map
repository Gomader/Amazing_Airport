{"version":3,"sources":["assets/script/creater_user.js"],"names":["cc","Class","Component","properties","newinput","type","EditBox","createnewuser","Node","onLoad","node","opacity","start","runAction","fadeIn","createnewfile","userData","name","string","stars","money","airplane","buildings","uprunway","downrunway","stand","ground_tower","terminal","fuel_station","originupload","xhr","XMLHttpRequest","open","setRequestHeader","send","JSON","stringify","onreadystatechange","readyState","status","sys","localStorage","setItem","responseText","director","loadScene"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AAEAA,EAAE,CAACC,KAAH,CAAS;AACL,aAASD,EAAE,CAACE,SADP;AAGLC,EAAAA,UAAU,EAAE;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAC,IAAAA,QAAQ,EAAC;AACLC,MAAAA,IAAI,EAACL,EAAE,CAACM,OADH;AAEL,iBAAQ;AAFH,KAhBD;AAoBRC,IAAAA,aAAa,EAAC;AACVF,MAAAA,IAAI,EAACL,EAAE,CAACQ,IADE;AAEV,iBAAQ;AAFE;AApBN,GAHP;AA6BL;AAEAC,EAAAA,MA/BK,oBA+BK;AACN,SAAKC,IAAL,CAAUC,OAAV,GAAoB,CAApB;AACH,GAjCI;AAmCLC,EAAAA,KAnCK,mBAmCI;AACL,SAAKF,IAAL,CAAUG,SAAV,CAAoBb,EAAE,CAACc,MAAH,CAAU,GAAV,CAApB;AACH,GArCI;AAuCLC,EAAAA,aAAa,EAAC,yBAAU;AACpB,QAAIC,QAAQ,GAAG;AACXC,MAAAA,IAAI,EAAG,KAAKb,QAAL,CAAcc,MADV;AAEXC,MAAAA,KAAK,EAAG,CAFG;AAGXC,MAAAA,KAAK,EAAG,GAHG;AAIXC,MAAAA,QAAQ,EAAG,EAJA;AAKXC,MAAAA,SAAS,EAAC;AACNC,QAAAA,QAAQ,EAAG,CADL;AAENC,QAAAA,UAAU,EAAG,CAFP;AAGNC,QAAAA,KAAK,EAAG,CAHF;AAINC,QAAAA,YAAY,EAAG,CAJT;AAKNC,QAAAA,QAAQ,EAAG,CALL;AAMNC,QAAAA,YAAY,EAAG;AANT;AALC,KAAf;AAcA,SAAKC,YAAL,CAAkBb,QAAlB;AACH,GAvDI;AAwDLa,EAAAA,YAAY,EAAC,sBAASb,QAAT,EAAkB;AAC3B,QAAIc,GAAG,GAAG,IAAIC,cAAJ,EAAV;AACAD,IAAAA,GAAG,CAACE,IAAJ,CAAS,MAAT,EAAiB,0EAAjB,EAA6F,IAA7F;AACAF,IAAAA,GAAG,CAACG,gBAAJ,CAAqB,cAArB,EAAoC,mCAApC;AACAH,IAAAA,GAAG,CAACI,IAAJ,CAAS,cAAcC,IAAI,CAACC,SAAL,CAAepB,QAAf,CAAvB;;AACAc,IAAAA,GAAG,CAACO,kBAAJ,GAAyB,YAAY;AACjC,UAAIP,GAAG,CAACQ,UAAJ,IAAkB,CAAlB,IAAwBR,GAAG,CAACS,MAAJ,IAAc,GAAd,IAAqBT,GAAG,CAACS,MAAJ,GAAa,GAA9D,EAAoE;AAChEvC,QAAAA,EAAE,CAACwC,GAAH,CAAOC,YAAP,CAAoBC,OAApB,CAA4B,IAA5B,EAAiCZ,GAAG,CAACa,YAArC;AACA3C,QAAAA,EAAE,CAACwC,GAAH,CAAOC,YAAP,CAAoBC,OAApB,CAA4B,UAA5B,EAAwCP,IAAI,CAACC,SAAL,CAAepB,QAAf,CAAxC;AACAhB,QAAAA,EAAE,CAAC4C,QAAH,CAAYC,SAAZ,CAAsB,cAAtB;AACH;AACJ,KAND;AAOH,GApEI,CAsEL;;AAtEK,CAAT","sourceRoot":"/","sourcesContent":["// Learn cc.Class:\n//  - https://docs.cocos.com/creator/manual/en/scripting/class.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        // foo: {\n        //     // ATTRIBUTES:\n        //     default: null,        // The default value will be used only when the component attaching\n        //                           // to a node for the first time\n        //     type: cc.SpriteFrame, // optional, default is typeof default\n        //     serializable: true,   // optional, default is true\n        // },\n        // bar: {\n        //     get () {\n        //         return this._bar;\n        //     },\n        //     set (value) {\n        //         this._bar = value;\n        //     }\n        // },\n        newinput:{\n            type:cc.EditBox,\n            default:null\n        },\n        createnewuser:{\n            type:cc.Node,\n            default:null\n        }\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        this.node.opacity = 0;\n    },\n\n    start () {\n        this.node.runAction(cc.fadeIn(1.0));\n    },\n\n    createnewfile:function(){\n        var userData = { \n            name : this.newinput.string,\n            stars : 0,\n            money : 100,\n            airplane : {},\n            buildings:{\n                uprunway : 1,\n                downrunway : 1,\n                stand : 1,\n                ground_tower : 1,\n                terminal : 1,\n                fuel_station : 0\n            }\n        };\n        this.originupload(userData);\n    },\n    originupload:function(userData){\n        var xhr = new XMLHttpRequest();\n        xhr.open(\"POST\", \"https://www.zhangmingzhe.cn/amazing_airport/amazing_airport.php?module=0\", true);\n        xhr.setRequestHeader(\"Content-type\",\"application/x-www-form-urlencoded\");\n        xhr.send(\"userData=\" + JSON.stringify(userData));\n        xhr.onreadystatechange = function () {\n            if (xhr.readyState == 4 && (xhr.status >= 200 && xhr.status < 400)) {\n                cc.sys.localStorage.setItem('id',xhr.responseText);\n                cc.sys.localStorage.setItem('userData', JSON.stringify(userData));\n                cc.director.loadScene(\"runway_scene\");\n            }\n        };\n    }\n\n    // update (dt) {},\n});\n"]}