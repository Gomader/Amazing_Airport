{"version":3,"sources":["assets/script/runway_scene.js"],"names":["userdata","require","cc","Class","Component","properties","userid","Integer","runway","type","Node","road","stand","username","Label","stars","fuel","ProgressBar","fuelnum","fuelclock","fuelclocknumber","passenger","passengernum","passengerclock","passengerclocknumber","coins","maxfuel","maxpassenger","allclock","Object","onLoad","node","opacity","sys","localStorage","getItem","allfile","JSON","parse","runstate","timenumber","lefts","leftfuel","leftpassenger","newuser","start","runAction","fadeIn","startclock","backtogame","update","dt","setItem","stringify","showmap","director","loadScene","downloadUserData","xhr","XMLHttpRequest","open","setRequestHeader","send","onreadystatechange","readyState","status","responseText","uploadUserData","console","log","leavetime","Date","left","add","Math","floor","getChildByName","buildings","uprunway","toString","active","downrunway","string","name","money","progress","callback","schedule"],"mappings":"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","sourceRoot":"/","sourcesContent":["// Learn cc.Class:\n//  - https://docs.cocos.com/creator/manual/en/scripting/class.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\n\nvar userdata = require('userdata');\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        // foo: {\n        //     // ATTRIBUTES:\n        //     default: null,        // The default value will be used only when the component attaching\n        //                           // to a node for the first time\n        //     type: cc.SpriteFrame, // optional, default is typeof default\n        //     serializable: true,   // optional, default is true\n        // },\n        // bar: {\n        //     get () {\n        //         return this._bar;\n        //     },\n        //     set (value) {\n        //         this._bar = value;\n        //     }\n        // },\n        userid:cc.Integer,\n        runway:{\n            type:cc.Node,\n            default:null\n        },\n        road:{\n            type:cc.Node,\n            default:null\n        },\n        stand:{\n            type:cc.Node,\n            default:null\n        },\n        username:{\n            type:cc.Label,\n            default:null\n        },\n        stars:{\n            type:cc.Label,\n            default:null\n        },\n        fuel:{\n            type:cc.ProgressBar,\n            default:null\n        },\n        fuelnum:{\n            type:cc.Label,\n            default:null\n        },\n        fuelclock:{\n            type:cc.Node,\n            default:null\n        },\n        fuelclocknumber:{\n            type:cc.Label,\n            default:null\n        },\n        passenger:{\n            type:cc.ProgressBar,\n            default:null\n        },\n        passengernum:{\n            type:cc.Label,\n            default:null\n        },\n        passengerclock:{\n            type:cc.Node,\n            default:null\n        },\n        passengerclocknumber:{\n            type:cc.Label,\n            default:null\n        },\n        coins:{\n            type:cc.Label,\n            default:null\n        },\n        maxfuel:cc.Integer,\n        maxpassenger:cc.Integer,\n        allclock:Object,\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        this.node.opacity = 0;\n        this.userid = cc.sys.localStorage.getItem(\"id\");\n        userdata.allfile = JSON.parse(cc.sys.localStorage.getItem('userData'));\n        this.allclock = {\n            fuelclock : {\n                runstate:false,\n                timenumber:0\n            },\n            passengerclock : {\n                runstate:false,\n                timenumber:0\n            }\n        },\n        userdata.lefts = {\n            leftfuel:0,\n            leftpassenger:0\n        }\n        this.newuser();\n    },\n\n    start () {\n        this.node.runAction(cc.fadeIn(1.0));\n        this.startclock();\n        this.backtogame();\n    },\n\n    update (dt) {\n        userdata.allfile = JSON.parse(cc.sys.localStorage.getItem('userData'));\n        cc.sys.localStorage.setItem(\"lefts\",JSON.stringify(this.lefts));\n        this.showmap();\n    },\n\n    newuser:function(){\n        if(this.userid==null){\n            cc.director.loadScene(\"homepage_scene\");\n        }else{\n            this.downloadUserData();\n        }\n    },\n\n    downloadUserData:function(){\n        var xhr = new XMLHttpRequest();\n        xhr.open(\"POST\", \"https://140.143.126.73/amazing_airport/amazing_airport.php?module=1\", true);\n        xhr.setRequestHeader(\"Content-type\",\"application/x-www-form-urlencoded\");\n        xhr.send(\"id=\" + this.userid);\n        xhr.onreadystatechange = function () {\n            if (xhr.readyState == 4 && (xhr.status >= 200 && xhr.status < 400)) {\n                if (xhr.responseText != 0){\n                    cc.sys.localStorage.setItem('userData',this.responseText);\n                }\n            }\n        }\n    },\n\n    uploadUserData:function(){\n        var xhr = new XMLHttpRequest();\n        xhr.open(\"POST\", \"https://140.143.126.73/amazing_airport/amazing_airport.php?module=2\", true);\n        xhr.setRequestHeader(\"Content-type\",\"application/x-www-form-urlencoded\");\n        xhr.send(\"id=\" + this.userid + \"&userData=\" + JSON.stringify(userdata.allfile));\n        xhr.onreadystatechange = function () {\n            if (xhr.readyState == 4 && (xhr.status >= 200 && xhr.status < 400)) {\n                if(xhr.responseText == 1){\n                    console.log(1);\n                }\n            }\n        }\n    },\n\n    backtogame:function(){\n        this.maxfuel = userdata.allfile.stars + 10;\n        this.maxpassenger = userdata.allfile.stars * 2 + 20;\n        var leavetime = (Date.parse(new Date()) - cc.sys.localStorage.getItem(\"time\"))/1000;\n        var left = JSON.parse(cc.sys.localStorage.getItem(\"lefts\"));\n        if(left.leftfuel >= this.maxfuel){\n            this.lefts.leftfuel = left.leftfuel;\n        }else{\n            var add = Math.floor(leavetime/60) + left.leftfuel;\n            if(add >= this.maxfuel){\n                this.lefts.leftfuel = this.maxfuel;\n            }else{\n                this.lefts.leftfuel = add;\n            }\n        }\n        if(left.leftpassenger >= this.maxpassenger){\n            this.lefts.leftpassenger = left.leftpassenger;\n        }else{\n            var add = Math.floor(leavetime/60) + left.leftpassenger;\n            if(add >= this.maxpassenger){\n                this.lefts.leftpassenger = this.maxpassenger;\n            }else{\n                this.lefts.leftpassenger = add;\n            }\n        }\n    },\n\n    showmap:function(){\n        this.runway.getChildByName(\"up\").getChildByName(userdata.allfile.buildings.uprunway.toString()).active = true;\n        this.runway.getChildByName(\"down\").getChildByName(userdata.allfile.buildings.downrunway.toString()).active = true;\n        if(userdata.allfile.buildings.uprunway>=9&&userdata.allfile.buildings.downrunway>=9){\n            this.road.getChildByName(\"9-9\").active = true;\n        }else if(userdata.allfile.buildings.uprunway>=6&&userdata.allfile.buildings.downrunway>=6){\n            this.road.getChildByName(\"6-6\").active = true;\n        }else if(userdata.allfile.buildings.uprunway>=3&&userdata.allfile.buildings.downrunway>=3){\n            this.road.getChildByName(\"3-3\").active = true;\n        }else{\n            this.road.getChildByName(\"1-1\").active = true;\n        }\n        this.stand.getChildByName(userdata.allfile.buildings.stand.toString()).active = true;\n        this.username.string = userdata.allfile.name;\n        this.stars.string = userdata.allfile.stars;\n        this.coins.string = userdata.allfile.money;\n        this.maxfuel = userdata.allfile.stars + 10;\n        this.maxpassenger = userdata.allfile.stars * 2 + 20;\n        this.fuel.progress = this.lefts.leftfuel / this.maxfuel;\n        this.fuelnum.string = this.lefts.leftfuel.toString() + \"/\" + this.maxfuel.toString();\n        this.passenger.progress = this.lefts.leftpassenger / this.maxpassenger;\n        this.passengernum.string = this.lefts.leftpassenger.toString() + \"/\" + this.maxpassenger.toString();\n        if (this.lefts.leftfuel < this.maxfuel && this.allclock.fuelclock.runstate == false){\n            this.allclock.fuelclock.runstate = true;\n            this.fuelclock.active = true;\n        }\n        if (this.lefts.leftpassenger < this.maxpassenger && this.allclock.passengerclock.runstate == false){\n            this.allclock.passengerclock.runstate = true;\n            this.passengerclock.active = true;\n        }\n    },\n\n    startclock:function(){\n        this.callback = function(){\n            cc.sys.localStorage.setItem(\"time\",Date.parse(new Date()));\n            if(this.allclock.fuelclock.runstate==true){\n                this.allclock.fuelclock.timenumber += 1;\n                if(this.allclock.fuelclock.timenumber == 60){\n                    this.allclock.fuelclock.timenumber = 0;\n                    this.lefts.leftfuel += 1;\n                }\n                if(this.allclock.fuelclock.timenumber<10){\n                    this.fuelclocknumber.string = \"0\" + this.allclock.fuelclock.timenumber.toString();\n                }else{\n                    this.fuelclocknumber.string = this.allclock.fuelclock.timenumber.toString();\n                }\n                if(this.lefts.leftfuel>=this.maxfuel){\n                    this.allclock.fuelclock.runstate = false;\n                    this.allclock.fuelclock.timenumber = 0;\n                    this.fuelclock.active = false;\n                }\n            }\n            if(this.allclock.passengerclock.runstate==true){\n                this.allclock.passengerclock.timenumber += 1;\n                if(this.allclock.passengerclock.timenumber == 60){\n                    this.allclock.passengerclock.timenumber = 0;\n                    this.lefts.leftpassenger += 1;\n                }\n                if(this.allclock.passengerclock.timenumber<10){\n                    this.passengerclocknumber.string = \"0\" + this.allclock.passengerclock.timenumber.toString();\n                }else{\n                    this.passengerclocknumber.string = this.allclock.passengerclock.timenumber.toString();\n                }\n                if(this.lefts.leftpassenger>=this.maxpassenger){\n                    this.allclock.passengerclock.runstate = false;\n                    this.allclock.passengerclock.timenumber = 0;\n                    this.passengerclock.active = false;\n                }\n            }\n        }\n        this.schedule(function(){\n            this.callback();\n        },1)\n    },\n});"]}